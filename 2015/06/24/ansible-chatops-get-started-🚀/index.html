<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>Ansible and ChatOps. Get started ðŸš€ | StackStorm</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="June 25, 2015 (Updated: February 21, 2017)
Contribution by Integration Developer Eugen C.

What is ChatOps?

ChatOps brings the context of work you are already doing into the conversations you are already having. @jfryman

ChatOps is still a fresh and uncommon thing in the DevOps world, where work is brought into a shared chat room. You can run commands directly from chat and everyone in the chatroom can see the history of work being done, do the same, interact with each other and even learn. The information and process is owned by the entire team which brings a lot of benefits.">
<meta name=generator content="Hugo 0.89.2">
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel=stylesheet href=/stackstorm.com/ananke/css/main.min.css>
<meta property="og:title" content="Ansible and ChatOps. Get started ðŸš€">
<meta property="og:description" content="June 25, 2015 (Updated: February 21, 2017)
Contribution by Integration Developer Eugen C.

What is ChatOps?

ChatOps brings the context of work you are already doing into the conversations you are already having. @jfryman

ChatOps is still a fresh and uncommon thing in the DevOps world, where work is brought into a shared chat room. You can run commands directly from chat and everyone in the chatroom can see the history of work being done, do the same, interact with each other and even learn. The information and process is owned by the entire team which brings a lot of benefits.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://stackstorm.github.io/stackstorm.com/2015/06/24/ansible-chatops-get-started-%F0%9F%9A%80/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2015-06-24T20:16:09+00:00">
<meta property="article:modified_time" content="2015-06-24T20:16:09+00:00">
<meta itemprop=name content="Ansible and ChatOps. Get started ðŸš€">
<meta itemprop=description content="June 25, 2015 (Updated: February 21, 2017)
Contribution by Integration Developer Eugen C.

What is ChatOps?

ChatOps brings the context of work you are already doing into the conversations you are already having. @jfryman

ChatOps is still a fresh and uncommon thing in the DevOps world, where work is brought into a shared chat room. You can run commands directly from chat and everyone in the chatroom can see the history of work being done, do the same, interact with each other and even learn. The information and process is owned by the entire team which brings a lot of benefits."><meta itemprop=datePublished content="2015-06-24T20:16:09+00:00">
<meta itemprop=dateModified content="2015-06-24T20:16:09+00:00">
<meta itemprop=wordCount content="8371">
<meta itemprop=keywords content="ansible,chatops,hubot,slack,vagrant,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Ansible and ChatOps. Get started ðŸš€">
<meta name=twitter:description content="June 25, 2015 (Updated: February 21, 2017)
Contribution by Integration Developer Eugen C.

What is ChatOps?

ChatOps brings the context of work you are already doing into the conversations you are already having. @jfryman

ChatOps is still a fresh and uncommon thing in the DevOps world, where work is brought into a shared chat room. You can run commands directly from chat and everyone in the chatroom can see the history of work being done, do the same, interact with each other and even learn. The information and process is owned by the entire team which brings a lot of benefits.">
</head>
<body class="ma0 avenir bg-near-white">
<header>
<div class=bg-black>
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/stackstorm.com/ class="f3 fw2 hover-white no-underline white-90 dib">
StackStorm
</a>
<div class="flex-l items-center">
</div>
</div>
</nav>
</div>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class=mt3>
<a href="https://www.facebook.com/sharer.php?u=https://stackstorm.github.io/stackstorm.com/2015/06/24/ansible-chatops-get-started-%F0%9F%9A%80/" class="facebook no-underline" aria-label="share on Facebook"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765 50.32h6.744V33.998h4.499l.596-5.624h-5.095l.007-2.816c0-1.466.14-2.253 2.244-2.253h2.812V17.68h-4.5c-5.405.0-7.307 2.729-7.307 7.317v3.377h-3.369v5.625h3.369V50.32zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</a>
<a href="https://twitter.com/share?url=https://stackstorm.github.io/stackstorm.com/2015/06/24/ansible-chatops-get-started-%F0%9F%9A%80/&text=Ansible%20and%20ChatOps.%20Get%20started%20%f0%9f%9a%80" class="twitter no-underline" aria-label="share on Twitter"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://stackstorm.github.io/stackstorm.com/2015/06/24/ansible-chatops-get-started-%F0%9F%9A%80/&title=Ansible%20and%20ChatOps.%20Get%20started%20%f0%9f%9a%80" class="linkedin no-underline" aria-label="share on LinkedIn"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
</div>
<h1 class="f1 athelas mt3 mb1">Ansible and ChatOps. Get started ðŸš€</h1>
<p class=tracked>
By <strong>
Eugen C.
</strong>
</p>
<time class="f6 mv4 dib tracked" datetime=2015-06-24T20:16:09Z>June 24, 2015</time>
</header>
<div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><strong>June 25, 2015</strong> (Updated: February 21, 2017)<br>
<em>Contribution by Integration Developer Eugen C.</em></p>
<p><img src=https://i.imgur.com/HWN8T78.png alt="Ansible and ChatOps with StackStorm event-driven automation platform, Slack, Hubot"></p>
<h2 id=what-is-chatops>What is ChatOps?</h2>
<blockquote>
<p>ChatOps brings the context of work you are already doing into the conversations you are already having. @jfryman</p>
</blockquote>
<p>ChatOps is still a fresh and uncommon thing in the DevOps world, where work is brought into a shared chat room. You can run commands directly from chat and everyone in the chatroom can see the history of work being done, do the same, interact with each other and even learn. The information and process is owned by the entire team which brings a lot of benefits.</p>
<p>You may come up with operations such as deploying code or provisioning servers from chat, viewing graphs from monitoring tools, sending SMS, controlling your clusters, or just running simple shell commands. ChatOps may be a high-level representation of your really complex CI/CD process, bringing simplicity with chat command such as: <code>!deploy</code>. This approach does wonders to increase visibility and reduce complexity around deploys.</p>
<h2 id=chatops-enhanced>ChatOps Enhanced</h2>
<p>StackStorm is an OpenSource project particularly focused on event-driven automation and ChatOps. The platform wires dozens of DevOps tools such as configuration management, monitoring, alerting, graphing and so on together, allowing you to rule everything from one control center. It is a perfect instrument for ChatOps, providing the opportunity to build and automate any imaginable workflows and operate any sets of tools directly from chat.</p>
<p>StackStorm has Ansible integration and during time added a lot of enhanced ChatOps features in <a href=https://stackstorm.com/2015/06/08/enhanced-chatops-from-stackstorm/>&lt;1.0</a>, <a href=https://stackstorm.com/2015/12/08/stackstorm-1-2-0-the-new-chatops/>1.2</a> and <a href=https://stackstorm.com/2016/04/20/stackstorm-v1-4/>1.4</a> platform versions to help you with real work, not just display funny kitten pics from chat. Below, I will cover how to make ChatOps and Ansible possible with help of the StackStorm platform.</p>
<blockquote>
<p>By the way, StackStorm as Ansible is declarative, written in Python and uses YAML + Jinja, which will make our journey even easier.</p>
</blockquote>
<h2 id=the-plan>The Plan</h2>
<p>In this tutorial weâ€™re going to install Ubuntu 14 control machine first, which will handle our ChatOps system. Then configure StackStorm platform, including Ansible integration pack. Finally, weâ€™ll connect the system with Slack, and show some simple, but real examples of Ansible usage directly from chat in an interactive way.</p>
<p>So letâ€™s get started and verify if weâ€™re near to technological singularity by giving root access to chat bots and allowing them to manage our 100+ servers and clusters.</p>
<h2 id=step-0>Step 0. Prepare Slack</h2>
<p>As said before, letâ€™s use Slack.com for chat. Register for a Slack account if you donâ€™t have one yet. Enable Hubot integration in settings.</p>
<blockquote>
<p>Hubot is GitHubâ€™s bot engine built for ChatOps.</p>
</blockquote>
<p><img src=https://i.imgur.com/fJ6DpBZ.png alt="Enable Hubot integration in Slack"><br>
Once youâ€™re done, youâ€™ll have an API Token:</p>
<pre><code>            &lt;td id=&quot;file-api-token-sh-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              HUBOT_SLACK_TOKEN=xoxb-5187818172-I7wLh4oqzhAScwXZtPcHyxCu
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Next, weâ€™ll configure the entire StackStorm platform, show some useful examples as well as allow you to craft your own ChatOps commands.</p>
<p>But wait, there is a simple way!</p>
<h2 id=vagrant-demo>Lazy Mode!</h2>
<p>For those who are lazy (most DevOps are), hereâ€™s a Vagrant repo which installs all the required tools within simple provision scripts, bringing you to the finish point and ready to write ChatOps commands in Slack chat: <a href=https://github.com/StackStorm/showcase-ansible-chatops>https://github.com/StackStorm/showcase-ansible-chatops</a></p>
<pre><code>            &lt;td id=&quot;file-0-vagrant-sh-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace with your token&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-0-vagrant-sh-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-0-vagrant-sh-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-k&quot;&gt;export&lt;/span&gt; HUBOT_SLACK_TOKEN=xoxb-5187818172-I7wLh4oqzhAScwXZtPcHyxCu
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-0-vagrant-sh-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-0-vagrant-sh-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              git clone https://github.com/StackStorm/showcase-ansible-chatops.git
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-0-vagrant-sh-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-0-vagrant-sh-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c1&quot;&gt;cd&lt;/span&gt; showcase-ansible-chatops
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-0-vagrant-sh-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-0-vagrant-sh-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-0-vagrant-sh-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-0-vagrant-sh-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              vagrant up
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>For those who are interested in details â€“ letâ€™s switch to manual mode and go further. But remember if you get stuck â€“ verify your results with examples provided in <a href=https://github.com/StackStorm/showcase-ansible-chatops>ansible & chatops showcase repo</a>.</p>
<h2 id=step-1>Step 1. Install StackStorm</h2>
<p>Itâ€™s really as simple as one command:</p>
<pre><code>            &lt;td id=&quot;file-1-1-install-st2-sh-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              curl -sSL https://stackstorm.com/packages/install.sh &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; sudo bash -- --user=demo --password=demo
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<blockquote>
<p>This one-liner is for demonstration purposes only, for prod deployments you should use <a href=https://github.com/stackstorm/ansible-st2>ansible playbooks</a> to install st2, verify signatures and so on. See <a href=https://docs.stackstorm.com/install/deb.html>https://docs.stackstorm.com/install/deb.html</a> to understand whatâ€™s happening under the hood.</p>
</blockquote>
<h2 id=step-2>Step 2. Install Ansible Integration pack</h2>
<p>The idea of integration packs in StackStorm is that they connect system with external tools or services. We need Ansible pack here:</p>
<pre><code>            &lt;td id=&quot;file-2-1-install-ansible-sh-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              st2 pack install ansible
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Besides pulling <a href=https://github.com/StackStorm-Exchange/stackstorm-ansible>Ansible Integration pack</a>, it installs ansible binaries into Python virtualenv located in <code>/opt/stackstorm/virtualenvs/ansible/bin</code>.</p>
<blockquote>
<p>See the full list of StackStorm Integration Packs at <a href=https://exchange.stackstorm.org/>exchange.stackstorm.org</a>. Between them: <code>AWS</code>, <code>GitHub</code>, <code>RabbitMQ</code>, <code>Pagerduty</code>, <code>Jenkins</code>, <code>Docker</code>, â€“ overall more than 100+!</p>
</blockquote>
<h2 id=step-3>Step 3. Configure ChatOps</h2>
<p>Now you need to configure the <code>/opt/stackstorm/chatops/st2chatops.env</code> file to suit your needs. It worth taking a look at all variables, but make sure you edit the following envs first:</p>
<pre><code>            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Bot name&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-k&quot;&gt;export&lt;/span&gt; HUBOT_NAME=stanley
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-k&quot;&gt;export&lt;/span&gt; HUBOT_ALIAS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; StackStorm API key&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Use: `st2 apikey create -k` to generate&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Replace with your key (!)&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-k&quot;&gt;export&lt;/span&gt; ST2_API_KEY=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;123randomstring789&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; ST2 AUTH credentials&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Replace with your username/password (!)&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-k&quot;&gt;export&lt;/span&gt; ST2_AUTH_USERNAME=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;demo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-k&quot;&gt;export&lt;/span&gt; ST2_AUTH_PASSWORD=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;demo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Configure Hubot to use Slack&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-k&quot;&gt;export&lt;/span&gt; HUBOT_ADAPTER=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;slack&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Replace with your token (!)&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-3-1-st2chatops-env-sh-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-k&quot;&gt;export&lt;/span&gt; HUBOT_SLACK_TOKEN=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;xoxb-5187818172-I7wLh4oqzhAScwXZtPcHyxCu&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Restart <code>st2chatops</code> to apply the changes, and youâ€™re ready to go:</p>
<pre><code>            &lt;td id=&quot;file-3-2-restart-st2chatops-sh-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              sudo service st2chatops restart
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<h2 id=step-4>Step 4. First ChatOps</h2>
<p>At this point you should see Stanley bot online in chat. Invite him into your Slack channel:</p>
<pre><code>            &lt;td id=&quot;file-4-1-first-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              /invite @stanley
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Get the list of available commands:</p>
<pre><code>            &lt;td id=&quot;file-4-2-first-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !help
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>I bet youâ€™ll love <a href=https://github.com/hubot-scripts/hubot-shipit><code>shipit</code></a>:</p>
<pre><code>            &lt;td id=&quot;file-4-3-first-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !ship it
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>After playing with existing commands, letâ€™s continue with something serious.</p>
<h2 id=step-5>Step 5. Crafting Your Own ChatOps Commands</h2>
<p>One of StackStorm features is the ability to create command aliases, simplifying your ChatOps experience. Instead of writing long command, you can just bind it to something more friendly and readable, simple sugar wrapper.</p>
<p>Letâ€™s create our own StackStorm pack which will include all needed commands. Fork StackStorm pack template in GitHub and touch our first Action Alias aliases/ansible.yaml with the following content:</p>
<pre><code>            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;chatops.ansible_local&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;action_ref&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ansible.command_local&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Run Ansible command on local machine&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;formats&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;display&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ansible &lt;command&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;representation&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ansible {{ args }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;result&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;format&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;|&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; Ansible command `{{ execution.parameters.args }}` result: {~}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% if execution.result.stderr %}*Stdout:* {% endif %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; ```{{ execution.result.stdout }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% if execution.result.stderr %}*Stderr:* ```{{ execution.result.stderr }}```{% endif %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt;&lt;/span&gt; &lt;span class=&quot;pl-ent&quot;&gt;extra&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;slack&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-50-aliases-ansible-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-50-aliases-ansible-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{% if execution.result.succeeded %}good{% else %}danger{% endif %}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/50.aliases.ansible.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-50-aliases-ansible-yaml&quot;&gt;50.aliases.ansible.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<blockquote>
<p>Note that this alias refers to ansible st2 integration pack</p>
</blockquote>
<p>Now, push your changes into forked GitHub repo and youâ€™re able to install just created pack. There is already a ChatOps alias to do that:</p>
<pre><code>            &lt;td id=&quot;file-50-deploy-chatops-pack-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !pack install https://github.com/armab/st2_chatops_aliases
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Now weâ€™re able to run a simple Ansible Ad-hoc command directly from Slack chat:</p>
<pre><code>            &lt;td id=&quot;file-50-chatops-command-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !ansible &quot;uname -a&quot;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p><img src=https://i.imgur.com/1TopcQh.png alt="executing ansible local command - ChatOps way"><br>
which at a low-level is equivalent of:</p>
<pre><code>            &lt;td id=&quot;file-50-cmd-sh-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              /opt/stackstorm/virtualenvs/ansible/bin/ansible all --connection=local --args=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;uname -a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; --inventory-file=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;127.0.0.1,&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>But letâ€™s explore more useful examples, showing benefits of ChatOps interactivity.</p>
<h3 id=case-1-server-status>Use Case â„–1: Get Server Status</h3>
<p>Ansible has simple ping module which just connects to specified hosts and returns <code>pong</code> on success. Easy, but powerful example to understand servers state directly from chat in a matter of seconds, without logging into terminal.</p>
<p>To do that, we need to create another <code>action</code> for our pack which runs real command and <code>action alias</code> which is just syntactic sugar making possible this ChatOps command:</p>
<pre><code>            &lt;td id=&quot;file-51-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !status 'web'
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Action actions/server_status.yaml:</p>
<pre><code>            &lt;td id=&quot;file-51-actions-server_status-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;server_status&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Show server status by running ansible ping ad-hoc command&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;runner_type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local-shell-cmd&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;entry_point&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;enabled&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;parameters&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;sudo&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Run command with sudo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;boolean&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;kwarg_op&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;cmd&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Command to run&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;/opt/stackstorm/virtualenvs/ansible/bin/ansible {{hosts}} --module-name=ping&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;hosts&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Ansible hosts to ping&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L22&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;22&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC22&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-actions-server_status-yaml-L23&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;23&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-actions-server_status-yaml-LC23&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;required&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/51.actions.server_status.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-51-actions-server_status-yaml&quot;&gt;51.actions.server_status.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Action alias aliases/server_status.yaml:</p>
<pre><code>            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;chatops.ansible_server_status&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;action_ref&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;st2_chatops_aliases.server_status&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Show status for hosts (ansible ping module)&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;formats&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;display&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;status &lt;hosts&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;representation&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;status {{ hosts }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;ping {{ hosts }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;result&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;format&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;|&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; Here is your status for `{{ execution.parameters.hosts }}` host(s): {~}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; ```{{ execution.result.stdout }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt;&lt;/span&gt; &lt;span class=&quot;pl-ent&quot;&gt;extra&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;slack&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{% if execution.result.succeeded %}good{% else %}danger{% endif %}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;fields&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Alive&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ execution.result.stdout|regex_replace('(?!SUCCESS).', '')|wordcount }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;short&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Dead&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L22&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;22&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC22&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ execution.result.stdout|regex_replace('(?!UNREACHABLE).', '')|wordcount }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L23&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;23&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC23&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;short&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L24&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;24&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC24&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;footer&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ execution.id }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-51-aliases-server_status-yaml-L25&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;25&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-51-aliases-server_status-yaml-LC25&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;footer_icon&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://stackstorm.com/wp/wp-content/uploads/2015/01/favicon.png&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/51.aliases.server_status.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-51-aliases-server_status-yaml&quot;&gt;51.aliases.server_status.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Make sure you configured hosts in Ansible inventory file <code>/etc/ansible/hosts</code>.</p>
<p>After commited changes, donâ€™t forget to reinstall edited pack from chat (replace it with your github repo):</p>
<pre><code>            &lt;td id=&quot;file-51-chatops-deploy-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !pack install https://github.com/armab/st2_chatops_aliases
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Itâ€™s pretty handy that you can keep all your ChatOps command configuration in remote repo as StackStorm pack and reload it after edits.</p>
<p>Letâ€™s get server statuses:<br>
<img src=https://i.imgur.com/ZOZgGnz.png alt="show server statuses - chatops"><br>
Itâ€™s really powerful, anyone can run that without having server access! With this approach collaboration, deployment and work around infrastructure can be done from anywhere in chat: are you in the office or work remotely (some of us may work directly from the beach).</p>
<h3 id=case-2-restart-services>Use Case â„–2: Restart Services</h3>
<p>Have you ever experienced when a simple service restart can solve the problem? Not ideal way of fixing things, but sometimes you just need to be fast. Letâ€™s write a ChatOps command that restarts specific services on specific hosts.</p>
<p>We want to make something like this possible:</p>
<pre><code>            &lt;td id=&quot;file-52-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !service restart &quot;rabbitmq-server&quot; on &quot;mq&quot;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>In previously created StackStorm pack touch actions/service_restart.yaml:</p>
<pre><code>            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;service_restart&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Restart service on remote hosts&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;runner_type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local-shell-cmd&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;entry_point&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;enabled&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;parameters&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;sudo&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Run command with sudo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;boolean&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;kwarg_op&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;cmd&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Command to run&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;/opt/stackstorm/virtualenvs/ansible/bin/ansible {{hosts}} --become --module-name=service --args='name={{service_name}} state=restarted'&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;hosts&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Ansible hosts&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L22&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;22&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC22&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L23&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;23&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC23&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;required&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L24&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;24&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC24&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;service_name&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L25&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;25&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC25&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Service to restart&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L26&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;26&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC26&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-actions-service_restart-yaml-L27&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;27&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-actions-service_restart-yaml-LC27&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;required&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/52.actions.service_restart.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-52-actions-service_restart-yaml&quot;&gt;52.actions.service_restart.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Alias for ChatOps: aliases/service_restart.yaml:</p>
<pre><code>            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;chatops.ansible_service_restart&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;action_ref&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;st2_chatops_aliases.service_restart&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Restart service on remote hosts&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;formats&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;display&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;service restart &lt;service_name&gt; on &lt;hosts&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;representation&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;service restart {{ service_name }} on {{ hosts }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;result&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;format&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;|&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; Service restart `{{ execution.parameters.service_name }}` on `{{ execution.parameters.hosts }}` host(s): {~}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% if execution.result.stderr %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Exit Status*: `{{ execution.result.return_code }}`&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Stderr:* ```{{ execution.result.stderr }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Stdout:*&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% endif %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; ```{{ execution.result.stdout }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt;&lt;/span&gt; &lt;span class=&quot;pl-ent&quot;&gt;extra&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;slack&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{% if execution.result.succeeded %}good{% else %}danger{% endif %}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;fields&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L22&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;22&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC22&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Restarted&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L23&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;23&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC23&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ execution.result.stdout|regex_replace('(?!SUCCESS).', '')|wordcount }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L24&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;24&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC24&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;short&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L25&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;25&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC25&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Failed&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L26&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;26&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC26&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ execution.result.stdout|regex_replace('(?!(FAILED|UNREACHABLE)!).', '')|wordcount }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L27&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;27&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC27&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;short&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L28&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;28&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC28&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;footer&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ execution.id }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-L29&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;29&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-52-aliases-service_restart-yaml-LC29&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;footer_icon&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://stackstorm.com/wp/wp-content/uploads/2015/01/favicon.png&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/52.aliases.service_restart.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-52-aliases-service_restart-yaml&quot;&gt;52.aliases.service_restart.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Letâ€™s get our hands dirty now:<br>
<img src=https://i.imgur.com/rNsHdtK.png alt="Restart nginx service on remote hosts in ChatOps way"><br>
And you know what? Thanks to the Slack mobile client, you can run those chat commands just from your mobile phone!</p>
<h3 id=case-3-mysql-processlist>Use case â„–3: Get currently running MySQL queries</h3>
<p>We want simple slack command to query the mysql processlist from db server:</p>
<pre><code>            &lt;td id=&quot;file-53-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !show mysql processlist
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Action actions/mysql_processlist.yaml:</p>
<pre><code>            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;mysql_processlist&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Show MySQL processlist&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;runner_type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local-shell-cmd&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;entry_point&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;enabled&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;parameters&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;sudo&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;kwarg_op&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;cmd&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Command to run&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;/opt/stackstorm/virtualenvs/ansible/bin/ansible {{ hosts }} --become --become-user=root -m shell -a &lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;mysql --execute='SHOW PROCESSLIST;' | expand -t 10&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;hosts&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Ansible hosts&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-actions-mysql_processlist-yaml-LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;db&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/53.actions.mysql_processlist.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-53-actions-mysql_processlist-yaml&quot;&gt;53.actions.mysql_processlist.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Action alias for ChatOps: aliases/mysql_processlist.yaml:</p>
<pre><code>            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;chatops.mysql_processlist&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;action_ref&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;st2_chatops_aliases.mysql_processlist&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Show MySQL processlist&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;formats&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;display&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;show mysql processlist &lt;hosts=db&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;representation&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;show mysql processlist {{ hosts=db }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;show mysql processlist on {{ hosts=db }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;result&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;format&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;|&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% if execution.status == 'succeeded' %}MySQL queries on `{{ execution.parameters.hosts }}`: ```{{ execution.result.stdout }}```{~}{% else %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Exit Code:* `{{ execution.result.return_code }}`&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Stderr:* ```{{ execution.result.stderr }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Stdout:* ```{{ execution.result.stdout }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-aliases-mysql_processlist-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% endif %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/53.aliases.mysql_processlist.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-53-aliases-mysql_processlist-yaml&quot;&gt;53.aliases.mysql_processlist.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Note that we made <code>hosts</code> parameter optional (defaults to <code>db</code>), so these commands are equivalent:</p>
<pre><code>            &lt;td id=&quot;file-53-1-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !show mysql processlist
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-53-1-chatops-txt-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-53-1-chatops-txt-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !show mysql processlist 'db'
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p><img src=https://i.imgur.com/RxePho1.png alt="show currently running MySQL queries ChatOps"><br>
Your DBA would be happy!</p>
<h3 id=case-4-http-stats>Use case â„–4: Get HTTP Stats From nginx</h3>
<p>We want to show HTTP status codes, sort them by occurrence and pretty print to understand how much <code>200</code> or <code>50x</code> there are on specific servers, is it in normal state or not:</p>
<pre><code>            &lt;td id=&quot;file-54-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !show nginx stats on 'web'
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Actual action which runs the command actions/http_status_codes.yaml:</p>
<pre><code>            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;http_status_codes&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Show sorted http status codes from nginx logs&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;runner_type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local-shell-cmd&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;entry_point&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;enabled&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;parameters&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;sudo&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;kwarg_op&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;cmd&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Command to run&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;/opt/stackstorm/virtualenvs/ansible/bin/ansible {{hosts|replace('http://','')}} --become -m shell -a &lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;awk '{print &lt;span class=&quot;pl-cce&quot;&gt;\\&lt;/span&gt;$9}' /var/log/nginx/access.log|sort |uniq -c |sort -k1,1nr 2&gt;/dev/null|column -t&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;hosts&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Ansible hosts&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-actions-http_status_codes-yaml-LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;required&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/54.actions.http_status_codes.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-54-actions-http_status_codes-yaml&quot;&gt;54.actions.http_status_codes.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Alias: aliases/http_status_codes.yaml</p>
<pre><code>            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;chatops.http_status_codes&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;action_ref&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;st2_chatops_aliases.http_status_codes&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Show sorted http status codes from nginx on hosts&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;formats&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;display&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;show nginx stats on &lt;hosts&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;representation&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;show nginx stats on {{ hosts }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;result&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-54-aliases-http_status_codes-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;format&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;```{{ execution.result.stdout }}```&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/54.aliases.http_status_codes.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-54-aliases-http_status_codes-yaml&quot;&gt;54.aliases.http_status_codes.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Result:<br>
<img src=https://i.imgur.com/Wsvdx3W.png alt="Show nginx http status codes on hosts - ChatOps way"><br>
Now it looks more like a control center. You can perform things against your hosts from chat and everyone can see the result, live!</p>
<h3 id=case-6-security-patching>Use Case â„–5: Security Patching</h3>
<p>Imagine you should patch another critical vulnerability like <a href=https://en.wikipedia.org/wiki/Shellshock_%28software_bug%29>Shellshock</a>. We need to update <code>bash</code> on all machines with help of Ansible. Instead of running it as ad-hoc command, letâ€™s compose a nice looking playbook, playbooks/update_package.yaml:</p>
<pre><code>            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Update package on remote hosts, run on 25% of servers at a time&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;hosts&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ hosts }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;serial&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;25%&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;become&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;True&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;become_user&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;root&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;tasks&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Check if Package is installed&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;command&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;dpkg-query -l {{ package }}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;register&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;is_installed&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;failed_when&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;is_installed.rc &gt; 1&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;changed_when&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;no&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Update Package only if installed&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;apt&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;name={{ package }}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt;state=latest&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt;update_cache=yes&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt;cache_valid_time=600&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-playbooks-update_package-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;when&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;is_installed.rc == 0&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/55.playbooks.update_package.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-55-playbooks-update_package-yaml&quot;&gt;55.playbooks.update_package.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>This playbook updates the package only if itâ€™s already installed, and the operation will run in chunks, 25% of servers at a time, eg. in 4 parts. This can be good if you want to update something meaningful like nginx on many hosts. This way we wonâ€™t put down entire web cluster. Additionally, you can add logic to remove/add servers from load balancer.<br>
You can see that <code>{{ hosts }}</code> and <code>{{ package }}</code> variables in playbook are injected from outside, see StackStorm action actions/update_package.yaml:</p>
<pre><code>            &lt;td id=&quot;file-55-actions-update_package-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;update_package&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Update package on remote hosts&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;runner_type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local-shell-cmd&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;entry_point&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;enabled&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;parameters&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;sudo&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;kwarg_op&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;timeout&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;6000&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;cmd&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Command to run&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;/opt/stackstorm/virtualenvs/ansible/bin/ansible-playbook /opt/stackstorm/packs/${ST2_ACTION_PACK_NAME}/playbooks/update_package.yaml --extra-vars='hosts={{hosts|replace('http://','')}} package={{package}}'&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;hosts&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Ansible hosts&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L22&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;22&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC22&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;required&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L23&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;23&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC23&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;package&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L24&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;24&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC24&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Package to upgrade&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L25&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;25&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC25&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-actions-update_package-yaml-L26&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;26&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-actions-update_package-yaml-LC26&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;required&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/55.actions.update_package.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-55-actions-update_package-yaml&quot;&gt;55.actions.update_package.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>And here is an action alias that makes possible to run playbook as simple chatops command,<br>
aliases/update_package.yaml:</p>
<pre><code>            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;chatops.ansible_package_update&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;action_ref&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;st2_chatops_aliases.update_package&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Update package on remote hosts&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;formats&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;display&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;update &lt;package&gt; on &lt;hosts&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;representation&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;update {{ package }} on {{ hosts }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;upgrade {{ package }} on {{ hosts }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;result&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;format&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;|&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; Update package `{{ execution.parameters.package }}` on `{{ execution.parameters.hosts }}` host(s): {~}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% if execution.result.stderr %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Exit Status*: `{{ execution.result.return_code }}`&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Stderr:* ```{{ execution.result.stderr }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; *Stdout:*&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% endif %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; ```{{ execution.result.stdout }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt;&lt;/span&gt; &lt;span class=&quot;pl-ent&quot;&gt;extra&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;slack&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L21&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;21&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC21&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;color&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{% if execution.result.succeeded %}good{% else %}danger{% endif %}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L22&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;22&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC22&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;fields&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L23&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;23&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC23&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Updated nodes&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L24&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;24&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC24&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ execution.result.stdout|regex_replace('(?!changed=1).', '')|wordcount }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L25&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;25&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC25&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;short&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L26&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;26&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC26&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;title&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Executed in&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L27&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;27&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC27&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;value&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;:timer_clock: {{ execution.elapsed_seconds | to_human_time_from_seconds }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L28&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;28&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC28&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;short&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L29&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;29&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC29&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;footer&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;{{ execution.id }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-55-aliases-update_package-yaml-L30&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;30&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-55-aliases-update_package-yaml-LC30&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;footer_icon&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;https://stackstorm.com/wp/wp-content/uploads/2015/01/favicon.png&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/55.aliases.update_package.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-55-aliases-update_package-yaml&quot;&gt;55.aliases.update_package.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Finally:</p>
<pre><code>            &lt;td id=&quot;file-55-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !update 'bash' on 'all'
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p><img src=https://i.imgur.com/aOEApkR.png alt="Update packages on remote hosts with help of Ansible and ChatOps"><br>
A big part of our work as DevOps engineers is to optimize the processes by making developers life easier, collaboration in team better, problem diagnostics faster by automating environment and bringing right tools to make the company successful.<br>
ChatOps solves that in a completely new efficient level!</p>
<h3 id=bonus-cowsay>Bonus Case: Holy Cowsay</h3>
<p>One more thing! As you know Ansible has a well known love for the holy cowsay utility. Letâ€™s bring it to ChatOps!</p>
<p>Install dependencies first:</p>
<pre><code>            &lt;td id=&quot;file-56-install-cowsay-sh-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              sudo apt-get install cowsay
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>Action actions/cowsay.yaml:</p>
<pre><code>            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;cowsay&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Draws a cow that says what you want&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;runner_type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local-shell-cmd&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;entry_point&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;enabled&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;parameters&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;sudo&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;kwarg_op&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;cmd&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Command to run&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;immutable&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;default&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;/usr/games/cowsay {{message}}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;message&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Message to say&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L19&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;19&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC19&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;string&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-actions-cowsay-yaml-L20&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;20&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-actions-cowsay-yaml-LC20&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;required&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/56.actions.cowsay.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-56-actions-cowsay-yaml&quot;&gt;56.actions.cowsay.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Alias aliases/cowsay.yaml:</p>
<pre><code>            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              ---
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L2&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;2&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC2&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;name&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;chatops.cowsay&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L3&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;3&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC3&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;action_ref&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;st2_chatops_aliases.cowsay&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L4&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;4&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC4&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;description&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;Draws a cow that says what you want&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L5&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;5&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC5&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;formats&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L6&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;6&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC6&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-ent&quot;&gt;display&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;cowsay &lt;message&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L7&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;7&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC7&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;representation&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L8&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;8&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC8&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              - &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;cowsay {{ message }}&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L9&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;9&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC9&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;ack&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L10&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;10&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC10&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;enabled&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;false&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L11&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;11&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC11&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;result&lt;/span&gt;:
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L12&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;12&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC12&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-ent&quot;&gt;format&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;|&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L13&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;13&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC13&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% if execution.status == 'succeeded' %}Here is your cow: ```{{ execution.result.stdout }}``` {~}{% else %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L14&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;14&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC14&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; Sorry, no cows this time {~}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L15&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;15&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC15&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; Exit Code: `{{ execution.result.return_code }}`&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L16&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;16&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC16&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; Stderr: ```{{ execution.result.stderr }}```&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L17&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;17&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC17&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; Hint: Make sure `cowsay` utility is installed.&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
          
          &lt;tr&gt;
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-L18&quot; class=&quot;blob-num js-line-number&quot; data-line-number=&quot;18&quot;&gt;
            &lt;/td&gt;
            
            &lt;td id=&quot;file-56-aliases-cowsay-yaml-LC18&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              &lt;span class=&quot;pl-s&quot;&gt; {% endif %}&lt;/span&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;div class=&quot;gist-meta&quot;&gt;
  &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952/raw/0c136caea12be6bd7bd20b87e796bb61f75ca1ba/56.aliases.cowsay.yaml&quot; style=&quot;float:right&quot;&gt;view raw&lt;/a&gt; &lt;a href=&quot;https://gist.github.com/armab/b20fac606b0dde509952#file-56-aliases-cowsay-yaml&quot;&gt;56.aliases.cowsay.yaml&lt;/a&gt; hosted with &amp;#10084; by &lt;a href=&quot;https://github.com&quot;&gt;GitHub&lt;/a&gt;
&lt;/div&gt;
</code></pre>
<p>Summon cows in a ChatOps way:</p>
<pre><code>            &lt;td id=&quot;file-56-chatops-txt-LC1&quot; class=&quot;blob-code blob-code-inner js-file-line&quot;&gt;
              !cowsay 'Holy ChatOps Cow!'
            &lt;/td&gt;
          &lt;/tr&gt;
        &lt;/table&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p><img src=https://i.imgur.com/mCYHFM6.png alt="holy chatops cow!"></p>
<blockquote>
<p>Note that all command results are available in StackStorm Web UI:<br>
https://chatops/ username: <code>demo</code> password: <code>demo</code></p>
</blockquote>
<h2 id=final-words>Donâ€™t Stop Here!</h2>
<p>These are simple examples. More complex situations when several DevOps tools are tied into dynamic workflows will be covered in future articles. This is where <a href=https://stackstorm.com/>StackStorm</a> shows its super power, making decisions about what to do depending on situation: event-driven architecture like self-healing systems.</p>
<p>Want new feature in StackStorm? Give us a proposal or start contributing to the project yourself. Additionally weâ€™re happy to help you, â€“ join our public Slack and feel free to ask any questions if you canâ€™t find your answer in <a href=https://docs.stackstorm.com/chatops/>our docs</a>.</p>
<p>So donâ€™t stop here. <a href=https://github.com/StackStorm/showcase-ansible-chatops>Try it</a>, think how you would use ChatOps? Share your ideas and stories (even crazy ones)!</p><ul class=pa0>
<li class=list>
<a href=/stackstorm.com/tags/ansible class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">ansible</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/chatops class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">chatops</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/hubot class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">hubot</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/slack class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">slack</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/vagrant class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">vagrant</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l">
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Related</p>
<ul class="pa0 list">
<li class=mb2>
<a href=/stackstorm.com/2015/06/12/ahh03-chatops-notifications/>AHH #03 â€“ ChatOps & Notifications</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2015/06/05/new-in-stackstorm-ansible-integration/>New In StackStorm: Ansible Integration</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2014/11/25/stackstorm-automated-troubleshooting/>StackStorm â€“ Automated Troubleshooting</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://stackstorm.github.io/stackstorm.com>
&copy; StackStorm 2021
</a>
<div>
</div>
</div>
</footer>
</body>
</html>