<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>OctopusDeploy Integration with StackStorm | StackStorm</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="October 1, 2015
Guest post by Anthony Shaw, Head of Innovation, ITaaS at Dimension Data
This blog post will take you through the integration pack for OctopusDeploy and give you some example actions and rules to integrate with other packs.
What is OctopusDeploy?
Octopus Deploy is an automated deployment tool for .NET and Windows environments. It has gained significant popularity amongst the .NET development community for it’s ease of use and integration into the Microsoft development ecosystem. OctopusDeploy enables users to automate deployment of applications, packages and tools to Windows environments.
Why integrate OctopusDeploy into StackStorm?
Octopus Deploy provides a rich system for Windows application deployments, but this is typically part of a wider DevOps process. Unlike StackStorm, it does not support closed-loop monitoring, remediation or infrastructure configuration and building, it does not integrate into configuration management tools (nor claim to). If you want to integrate OctopusDeploy from another tool, as part of a DevOps or environment tool you could">
<meta name=generator content="Hugo 0.89.2">
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel=stylesheet href=/stackstorm.com/ananke/css/main.min.css>
<meta property="og:title" content="OctopusDeploy Integration with StackStorm">
<meta property="og:description" content="October 1, 2015
Guest post by Anthony Shaw, Head of Innovation, ITaaS at Dimension Data
This blog post will take you through the integration pack for OctopusDeploy and give you some example actions and rules to integrate with other packs.
What is OctopusDeploy?
Octopus Deploy is an automated deployment tool for .NET and Windows environments. It has gained significant popularity amongst the .NET development community for it’s ease of use and integration into the Microsoft development ecosystem. OctopusDeploy enables users to automate deployment of applications, packages and tools to Windows environments.
Why integrate OctopusDeploy into StackStorm?
Octopus Deploy provides a rich system for Windows application deployments, but this is typically part of a wider DevOps process. Unlike StackStorm, it does not support closed-loop monitoring, remediation or infrastructure configuration and building, it does not integrate into configuration management tools (nor claim to). If you want to integrate OctopusDeploy from another tool, as part of a DevOps or environment tool you could">
<meta property="og:type" content="article">
<meta property="og:url" content="https://stackstorm.github.io/stackstorm.com/2015/10/01/octopusdeploy-integration-with-stackstorm/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2015-10-01T15:02:25+00:00">
<meta property="article:modified_time" content="2015-10-01T15:02:25+00:00">
<meta itemprop=name content="OctopusDeploy Integration with StackStorm">
<meta itemprop=description content="October 1, 2015
Guest post by Anthony Shaw, Head of Innovation, ITaaS at Dimension Data
This blog post will take you through the integration pack for OctopusDeploy and give you some example actions and rules to integrate with other packs.
What is OctopusDeploy?
Octopus Deploy is an automated deployment tool for .NET and Windows environments. It has gained significant popularity amongst the .NET development community for it’s ease of use and integration into the Microsoft development ecosystem. OctopusDeploy enables users to automate deployment of applications, packages and tools to Windows environments.
Why integrate OctopusDeploy into StackStorm?
Octopus Deploy provides a rich system for Windows application deployments, but this is typically part of a wider DevOps process. Unlike StackStorm, it does not support closed-loop monitoring, remediation or infrastructure configuration and building, it does not integrate into configuration management tools (nor claim to). If you want to integrate OctopusDeploy from another tool, as part of a DevOps or environment tool you could"><meta itemprop=datePublished content="2015-10-01T15:02:25+00:00">
<meta itemprop=dateModified content="2015-10-01T15:02:25+00:00">
<meta itemprop=wordCount content="736">
<meta itemprop=keywords content="actions,integrations,OctopusDeploy,StackStorm,workflows,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="OctopusDeploy Integration with StackStorm">
<meta name=twitter:description content="October 1, 2015
Guest post by Anthony Shaw, Head of Innovation, ITaaS at Dimension Data
This blog post will take you through the integration pack for OctopusDeploy and give you some example actions and rules to integrate with other packs.
What is OctopusDeploy?
Octopus Deploy is an automated deployment tool for .NET and Windows environments. It has gained significant popularity amongst the .NET development community for it’s ease of use and integration into the Microsoft development ecosystem. OctopusDeploy enables users to automate deployment of applications, packages and tools to Windows environments.
Why integrate OctopusDeploy into StackStorm?
Octopus Deploy provides a rich system for Windows application deployments, but this is typically part of a wider DevOps process. Unlike StackStorm, it does not support closed-loop monitoring, remediation or infrastructure configuration and building, it does not integrate into configuration management tools (nor claim to). If you want to integrate OctopusDeploy from another tool, as part of a DevOps or environment tool you could">
</head>
<body class="ma0 avenir bg-near-white">
<header>
<div class=bg-black>
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/stackstorm.com/ class="f3 fw2 hover-white no-underline white-90 dib">
StackStorm
</a>
<div class="flex-l items-center">
</div>
</div>
</nav>
</div>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class=mt3>
<a href="https://www.facebook.com/sharer.php?u=https://stackstorm.github.io/stackstorm.com/2015/10/01/octopusdeploy-integration-with-stackstorm/" class="facebook no-underline" aria-label="share on Facebook"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765 50.32h6.744V33.998h4.499l.596-5.624h-5.095l.007-2.816c0-1.466.14-2.253 2.244-2.253h2.812V17.68h-4.5c-5.405.0-7.307 2.729-7.307 7.317v3.377h-3.369v5.625h3.369V50.32zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</a>
<a href="https://twitter.com/share?url=https://stackstorm.github.io/stackstorm.com/2015/10/01/octopusdeploy-integration-with-stackstorm/&text=OctopusDeploy%20Integration%20with%20StackStorm" class="twitter no-underline" aria-label="share on Twitter"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://stackstorm.github.io/stackstorm.com/2015/10/01/octopusdeploy-integration-with-stackstorm/&title=OctopusDeploy%20Integration%20with%20StackStorm" class="linkedin no-underline" aria-label="share on LinkedIn"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
</div>
<h1 class="f1 athelas mt3 mb1">OctopusDeploy Integration with StackStorm</h1>
<p class=tracked>
By <strong>
st2admin
</strong>
</p>
<time class="f6 mv4 dib tracked" datetime=2015-10-01T15:02:25Z>October 1, 2015</time>
</header>
<div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><strong>October 1, 2015</strong><br>
<em>Guest post by <a href=https://twitter.com/anthonypjshaw>Anthony Shaw</a>, Head of Innovation, ITaaS at <a href=http://dimensiondata.com>Dimension Data</a></em></p>
<p>This blog post will take you through the <a href=https://github.com/StackStorm-Exchange/stackstorm-octopusdeploy>integration pack for OctopusDeploy</a> and give you some example actions and rules to integrate with other packs.</p>
<h2 id=what-is-octopusdeploy>What is OctopusDeploy?</h2>
<p><a href=http://www.octopusdeploy.com>Octopus Deploy</a> is an automated deployment tool for .NET and Windows environments. It has gained significant popularity amongst the .NET development community for it’s ease of use and integration into the Microsoft development ecosystem. OctopusDeploy enables users to automate deployment of applications, packages and tools to Windows environments.</p>
<h2 id=why-integrate-octopusdeploy-into-stackstorm>Why integrate OctopusDeploy into StackStorm?</h2>
<p>Octopus Deploy provides a rich system for Windows application deployments, but this is typically part of a wider DevOps process. Unlike StackStorm, it does not support closed-loop monitoring, remediation or infrastructure configuration and building, it does not integrate into configuration management tools (nor claim to). If you want to integrate OctopusDeploy from another tool, as part of a DevOps or environment tool you could</p>
<p>write custom integrations from each tool to the Octopus API or you could simply use StackStorm as the go-between to join your systems together. Imagine the possible integration scenarios:</p>
<ul>
<li>Configuring the Octopus Deploy agent as part of a new environment creation</li>
<li>Creating a new release when a git commit is detected</li>
<li>Calling a 3rd party system when a release or deployment is created in Octopus</li>
</ul>
<p>The Octopus Deploy pack for StackStorm enables you to drive those scenarios with no additional development. StackStorm packs consist of 2 components:</p>
<ul>
<li><strong>Actions</strong> – Tasks that can be called from a trigger, e.g. “Create Release”</li>
<li><strong>Sensors</strong> – Processes that run and detect events as <em>triggers</em>, e.g. “New Release”</li>
</ul>
<h3 id=supported-actions-the-following-actions-listed-below-are-supported>Supported Actions The following actions listed below are supported:</h3>
<ul>
<li>Create a new release – <code>create_release</code></li>
<li>Deploy a release to an environment – <code>deploy_release</code></li>
<li>Get a list of releases for a project – <code>get_releases</code></li>
<li>Add a new machine to an environment(s) – <code>add_machine</code></li>
</ul>
<h3 id=sensors-actions-or-workflows-can-be-initialized-automatically-from-these-sensors>Sensors Actions or workflows can be initialized automatically from these sensors:</h3>
<ul>
<li>Detect a new release being created – <code>new_release_sensor</code></li>
<li>Detect a new deployment being created – <code>new_deployment_sensor</code></li>
</ul>
<h2 id=installing-the-octopusdeploy-integration-pack>Installing the OctopusDeploy integration pack</h2>
<p>From the StackStorm console, use the <code>packs.install</code> task to download and install the pack:</p>
<pre><code>st2 pack install octopusdeploy
</code></pre>
<p>StackStorm packs by <em>convention</em> each have a configuration file for server-wide properties. The Octopus pack needs to be configured first, <code>update /opt/stackstorm/packs/octopusdeploy/config.yaml</code> to setup the connection to Octopus. You need to issue an Octopus Deploy API key to integrate the pack. The documentation for this is available on the <a href=http://docs.octopusdeploy.com/display/OD/How+to+create+an+API+key>Octopus Website</a>. Within <code>config.yaml</code>, populate the example properties with your test instance</p>
<ul>
<li><code>api_key</code> – an API key generated in Octopus for your user</li>
<li><code>host</code> – the hostname of your Octopus server e.g. octopus.mydomain.com</li>
<li><code>port</code> – the port your API service is running on, 443 by default Now, restart the StackStorm services to reload the configurationst2ctl restart</li>
</ul>
<p>Now you can test in the UI to get releases and versions. Select the actions pane and choose get_releases. Enter the project ID of one of your existing projects and execute the action.</p>
<p><img src=http://stackstorm.com/wp/wp-content/uploads/2015/10/st_image2015_9_7_11_37_36.png alt="Screenshot of Octopus Integration"></p>
<h2 id=a-real-life-example>A real life example</h2>
<p>Got it? Ok, lets look at a more concrete example. Let’s create a basic rule that detects when a new release or deployment is raised and posts a message in Slack with some details. I’m going to assume you already have a Slack account, if you haven’t already installed the Slack pack you can do so now</p>
<p>Then update /opt/stackstorm/configs/slack.yaml with an authentication token from Slack <a href=https://github.com/StackStorm-Exchange/stackstorm-slack/blob/master/README.md>using the instructions here</a>.</p>
<p>From the console, create a new rule definition using this format:</p>
<p>Import the rule into StackStorm by using the rule create command.</p>
<p>Back in the UI you will see your new rule,</p>
<p><img src=http://stackstorm.com/wp/wp-content/uploads/2015/10/st_image2015_9_7_11_46_46.png alt="Completed Rule"></p>
<p>When someone has created a new release, you will see the rule action in the History pane:</p>
<p><img src=http://stackstorm.com/wp/wp-content/uploads/2015/10/st_image2015_9_7_12_56_33.png alt="Run history"></p>
<p>To detect new deployments, create a new rule</p>
<p>And then in Slack you should see a live feed of new releases and deployments within the “Releases” channel.</p>
<p><img src=http://stackstorm.com/wp/wp-content/uploads/2015/10/Stack_Slack.png alt="slack view"></p>
<h2 id=what8217s-next>What’s next</h2>
<p>Now you’re familiar with the pack and the potential for other integration scenarios, check out some of the other actions you could run in packs like:</p>
<ul>
<li><a href=https://github.com/StackStorm-Exchange/stackstorm-ansible>Ansible</a>, <a href=https://github.com/StackStorm-Exchange/stackstorm-salt>Salt</a>, <a href=https://github.com/StackStorm-Exchange/stackstorm-chef>Chef</a>, <a href=https://github.com/StackStorm-Exchange/stackstorm-puppet>Puppet</a> – Combining your Octopus workflows with other devops tools</li>
<li><a href=https://github.com/StackStorm-Exchange/stackstorm-git>Git</a>, <a href=https://github.com/StackStorm-Exchange/stackstorm-github>GitHub</a>, <a href=https://github.com/StackStorm-Exchange/stackstorm-jenkins>Jenkins</a> – Triggering new releases or deployments from build or source control events</li>
<li><a href=https://github.com/StackStorm-Exchange/stackstorm-aws>AWS</a>, <a href=https://github.com/StackStorm-Exchange/stackstorm-azure>Azure</a>, <a href=https://github.com/StackStorm-Exchange/stackstorm-libcloud>LibCloud</a> – Deploying Octopus tentacles as part of your infrastructure standup</li>
<li><a href=https://github.com/StackStorm-Exchange/stackstorm-twitter>Twitter</a> – Want to automatically announce new releases of your product to the world?!</li>
</ul><ul class=pa0>
<li class=list>
<a href=/stackstorm.com/tags/actions class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">actions</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/integrations class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">integrations</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/octopusdeploy class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">OctopusDeploy</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/stackstorm class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">StackStorm</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/workflows class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">workflows</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l">
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Related</p>
<ul class="pa0 list">
<li class=mb2>
<a href=/stackstorm.com/2015/05/29/ahh-02-workflow-construction/>AHH #02 – Workflow Construction</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://stackstorm.github.io/stackstorm.com>
&copy; StackStorm 2021
</a>
<div>
</div>
</div>
</footer>
</body>
</html>