<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<title>StackStorm HA in Kubernetes βeta – Community update | StackStorm</title>
<meta name=viewport content="width=device-width,minimum-scale=1">
<meta name=description content="Oct 10, 2018
By Warren Van Winckel and Eugen C.
A couple weeks ago, we released the Helm chart and docker images so you could install StackStorm Enterprise HA cluster in Kubernetes.
Today, we’re glad to announce that the Community free and open source edition of StackStorm HA is now available, too! With this update we are excited to bring Kubernetes powers to the broader community and strive for greater adoption in production with better safety for all important operations you delegate to StackStorm automation engine.
">
<meta name=generator content="Hugo 0.89.2">
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel=stylesheet href=/stackstorm.com/ananke/css/main.min.css>
<meta property="og:title" content="StackStorm HA in Kubernetes βeta – Community update">
<meta property="og:description" content="Oct 10, 2018
By Warren Van Winckel and Eugen C.
A couple weeks ago, we released the Helm chart and docker images so you could install StackStorm Enterprise HA cluster in Kubernetes.
Today, we’re glad to announce that the Community free and open source edition of StackStorm HA is now available, too! With this update we are excited to bring Kubernetes powers to the broader community and strive for greater adoption in production with better safety for all important operations you delegate to StackStorm automation engine.
">
<meta property="og:type" content="article">
<meta property="og:url" content="https://stackstorm.github.io/stackstorm.com/2018/10/10/stackstorm-ha-in-kubernetes-beta-community-update/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2018-10-10T13:06:04+00:00">
<meta property="article:modified_time" content="2018-10-10T13:06:04+00:00">
<meta itemprop=name content="StackStorm HA in Kubernetes βeta – Community update">
<meta itemprop=description content="Oct 10, 2018
By Warren Van Winckel and Eugen C.
A couple weeks ago, we released the Helm chart and docker images so you could install StackStorm Enterprise HA cluster in Kubernetes.
Today, we’re glad to announce that the Community free and open source edition of StackStorm HA is now available, too! With this update we are excited to bring Kubernetes powers to the broader community and strive for greater adoption in production with better safety for all important operations you delegate to StackStorm automation engine.
"><meta itemprop=datePublished content="2018-10-10T13:06:04+00:00">
<meta itemprop=dateModified content="2018-10-10T13:06:04+00:00">
<meta itemprop=wordCount content="450">
<meta itemprop=keywords content="Community,community-edition,containers,Docker,FOSS,HA,helm,high-availability,k8s,kubernetes,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="StackStorm HA in Kubernetes βeta – Community update">
<meta name=twitter:description content="Oct 10, 2018
By Warren Van Winckel and Eugen C.
A couple weeks ago, we released the Helm chart and docker images so you could install StackStorm Enterprise HA cluster in Kubernetes.
Today, we’re glad to announce that the Community free and open source edition of StackStorm HA is now available, too! With this update we are excited to bring Kubernetes powers to the broader community and strive for greater adoption in production with better safety for all important operations you delegate to StackStorm automation engine.
">
</head>
<body class="ma0 avenir bg-near-white">
<header>
<div class=bg-black>
<nav class="pv3 ph3 ph4-ns" role=navigation>
<div class="flex-l justify-between items-center center">
<a href=/stackstorm.com/ class="f3 fw2 hover-white no-underline white-90 dib">
StackStorm
</a>
<div class="flex-l items-center">
</div>
</div>
</nav>
</div>
</header>
<main class=pb7 role=main>
<article class="flex-l flex-wrap justify-between mw8 center ph3">
<header class="mt4 w-100">
<aside class="instapaper_ignoref b helvetica tracked">
POSTS
</aside>
<div id=sharing class=mt3>
<a href="https://www.facebook.com/sharer.php?u=https://stackstorm.github.io/stackstorm.com/2018/10/10/stackstorm-ha-in-kubernetes-beta-community-update/" class="facebook no-underline" aria-label="share on Facebook"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765 50.32h6.744V33.998h4.499l.596-5.624h-5.095l.007-2.816c0-1.466.14-2.253 2.244-2.253h2.812V17.68h-4.5c-5.405.0-7.307 2.729-7.307 7.317v3.377h-3.369v5.625h3.369V50.32zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg>
</a>
<a href="https://twitter.com/share?url=https://stackstorm.github.io/stackstorm.com/2018/10/10/stackstorm-ha-in-kubernetes-beta-community-update/&text=StackStorm%20HA%20in%20Kubernetes%20%ce%b2eta%20%e2%80%93%20Community%20update" class="twitter no-underline" aria-label="share on Twitter"><svg height="32" style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
<a href="https://www.linkedin.com/shareArticle?mini=true&url=https://stackstorm.github.io/stackstorm.com/2018/10/10/stackstorm-ha-in-kubernetes-beta-community-update/&title=StackStorm%20HA%20in%20Kubernetes%20%ce%b2eta%20%e2%80%93%20Community%20update" class="linkedin no-underline" aria-label="share on LinkedIn"><svg height="32" style="enable-background:new 0 0 65 65" viewBox="0 0 65 65" width="32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M50.837 48.137V36.425c0-6.275-3.35-9.195-7.816-9.195-3.604.0-5.219 1.983-6.119 3.374V27.71h-6.79c.09 1.917.0 20.427.0 20.427h6.79V36.729c0-.609.044-1.219.224-1.655.49-1.22 1.607-2.483 3.482-2.483 2.458.0 3.44 1.873 3.44 4.618v10.929H50.837zM22.959 24.922c2.367.0 3.842-1.57 3.842-3.531-.044-2.003-1.475-3.528-3.797-3.528s-3.841 1.524-3.841 3.528c0 1.961 1.474 3.531 3.753 3.531H22.959zM34 64C17.432 64 4 50.568 4 34 4 17.431 17.432 4 34 4s30 13.431 30 30c0 16.568-13.432 30-30 30zM26.354 48.137V27.71h-6.789v20.427h6.789z" style="fill-rule:evenodd;clip-rule:evenodd;fill:"/></svg>
</a>
</div>
<h1 class="f1 athelas mt3 mb1">StackStorm HA in Kubernetes βeta – Community update</h1>
<p class=tracked>
By <strong>
st2admin
</strong>
</p>
<time class="f6 mv4 dib tracked" datetime=2018-10-10T13:06:04Z>October 10, 2018</time>
</header>
<div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p><strong>Oct 10, 2018</strong><br>
<em>By <a href=https://github.com/warrenvw>Warren Van Winckel</a> and <a href=https://github.com/armab>Eugen C.</a></em></p>
<p>A couple weeks ago, <a href=https://stackstorm.com/2018/09/26/stackstorm-enterprise-ha-in-kubernetes-beta/>we released</a> the Helm chart and docker images so you could install StackStorm Enterprise HA cluster in Kubernetes.</p>
<p>Today, we’re glad to announce that the Community free and open source edition of StackStorm HA is now available, too! With this update we are excited to bring Kubernetes powers to the broader community and strive for greater adoption in production with better safety for all important operations you delegate to StackStorm automation engine.</p>
<p><a href=https://github.com/stackstorm/stackstorm-ha></a></p>
<p>To install StackStorm cluster:</p>
<p>This will setup a fleet of more than 30 pods and ensure that every StackStorm component and their dependencies like database, message bus or distributed coordination backend have enough redundancy to guarantee higher availability.</p>
<p>For those with an enterprise license, just enable it in Helm values. <code>helm upgrade</code> will upgrade your cluster from Community to Enterprise edition with no loss of data or uptime, <a href=https://docs.stackstorm.com/latest/install/k8s_ha.html#enterprise-ewc>see instructions</a>.</p>
<blockquote>
<p>If you want to dig deeper configuring StackStorm HA in K8s with Helm – we recommend to check out documentation and latest development at <a href=https://github.com/stackstorm/stackstorm-ha>github.com/stackstorm/stackstorm-ha</a>.</p>
</blockquote>
<p>We also updated the StackStorm Installation documentation at <a href=https://docs.stackstorm.com/install/k8s_ha.html>https://docs.stackstorm.com/install/k8s_ha.html</a></p>
<h3 id=new-community-dockerfiles>New Community Dockerfiles</h3>
<p>The community docker images used by the <code>stackstorm-ha</code> helm charts are found at <a href=https://github.com/stackstorm/st2-dockerfiles>github.com/stackstorm/st2-dockerfiles</a>. Today, we deprecate <a href=https://github.com/StackStorm/st2-docker/tree/master/runtime/kubernetes-1ppc>runtime/kubernetes-1ppc</a> in <code>st2-docker</code> repository. It will be removed early next year in time for the StackStorm v3.1 release. The new Dockerfiles are based on <code>Ubuntu Xenial</code> and define granular resources like ports, volumes, users per container. This ensures better security and makes it very clear what each container can access. We aim to follow <a href=https://12factor.net>12 factor app</a>, <a href=https://docs.docker.com/develop/dev-best-practices/>docker dev</a> and <a href=https://docs.docker.com/develop/develop-images/dockerfile_best-practices/>dockerfile best practices</a>. For example, containers are ephemeral and immutable, they’re smaller in size, everything is logged to stdout/stderr and we use one service per container to strive the production-level expectations.</p>
<h3 id=future-plans>Future Plans</h3>
<p>We will remove the beta label, and announce General Availability in the next few months. We want to get some real-world user feedback first. Let us know if you hit any problems! Near term, we plan to work on K8s Ingress Controller (<a href=https://github.com/stackstorm/stackstorm-ha/issues/6>#6</a>), Prometheus Metrics (<a href=https://github.com/stackstorm/stackstorm-ha/issues/23>#23</a>), Liveness/Readiness probes for st2 services to ensure correct K8s failover, st2sensorcontainer partitioning/load distribution, as well as various security enhancements, features and production requirements. A list of all documented issues is found at <a href=https://github.com/StackStorm/stackstorm-ha/issues>StackStorm/stackstorm-ha/issues</a> and <a href=https://github.com/StackStorm/st2-dockerfiles/issues>StackStorm/st2-dockerfiles/issues</a>.</p>
<p>As this new deployment method is in beta state and further development is in progress, we ask you to try it and influence future work by providing your valuable feedback. You can do this via ideas, bug reports, feature or pull requests in <a href=https://github.com/StackStorm/stackstorm-ha>StackStorm/stackstorm-ha</a> and/or <a href=https://github.com/StackStorm/st2-dockerfiles>StackStorm/st2-dockerfiles</a>. Also by asking questions at <a href=https://forum.stackstorm.com>forum.stackstorm.com</a> or in our <a href=https://stackstorm.com/community-signup>Slack</a> <code>#docker</code> channel. As always, you can write us an email.</p><ul class=pa0>
<li class=list>
<a href=/stackstorm.com/tags/community class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Community</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/community-edition class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">community-edition</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/containers class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">containers</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/docker class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Docker</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/foss class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">FOSS</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/ha class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">HA</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/helm class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">helm</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/high-availability class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">high-availability</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/k8s class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">k8s</a>
</li>
<li class=list>
<a href=/stackstorm.com/tags/kubernetes class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">kubernetes</a>
</li>
</ul>
<div class="mt6 instapaper_ignoref">
</div>
</div>
<aside class="w-30-l mt6-l">
<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
<p class="f5 b mb3">Related</p>
<ul class="pa0 list">
<li class=mb2>
<a href=/stackstorm.com/2018/09/26/stackstorm-enterprise-ha-in-kubernetes-beta/>StackStorm Enterprise HA in Kubernetes – βeta</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2017/06/22/autoscaling-swarm-aws-stackstorm/>Autoscaling Swarm on AWS with StackStorm</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2018/08/17/more-packs-more-fixes/>More Packs, More Fixes</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2018/08/09/stackstorm-puppet-module-goes-v1-0-0-stable/>StackStorm Puppet Module goes v1.0.0 stable!</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2018/07/17/st2-exchange-pack-updates/>ST2 2.8.1 plus Exchange Pack Updates</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2018/06/03/recent-exchange-updates/>Recent Exchange Updates</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2018/04/20/more-packs-more-actions-and-a-new-forum/>More Packs, More Actions, and a new Forum</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2018/03/03/february-update/>February Update</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2018/02/02/double-packs-update/>Double Packs Update</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2017/12/14/stackstorm-exchange-goes-serverless/>StackStorm Exchange goes Serverless</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2017/12/01/november-pack-roundup/>November Pack Roundup</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2017/11/01/october-pack-updates/>October Pack Updates</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2017/09/04/august-pack-updates/>August Pack Updates</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2017/08/30/new-improved-stackstorm-docker-images/>New and Improved StackStorm Docker Images!</a>
</li>
<li class=mb2>
<a href=/stackstorm.com/2017/08/22/stackstorm-centralized-logging-graylog/>StackStorm Centralized Logging with Graylog</a>
</li>
</ul>
</div>
</aside>
</article>
</main>
<footer class="bg-black bottom-0 w-100 pa3" role=contentinfo>
<div class="flex justify-between">
<a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://stackstorm.github.io/stackstorm.com>
&copy; StackStorm 2021
</a>
<div>
</div>
</div>
</footer>
</body>
</html>