<!DOCTYPE html>
<html lang="en-US">
<head>
	<style type="text/css">.ttfm1{font-family: 'dual300';font-size:em;line-height:em;color:;}  .ttfm2{font-family: 'Roboto';font-size:em;line-height:3em;color:;}</style>	<!--[if lt IE 9]>
	<script src="../../../../wp/wp-content/themes/rise/js/html5/dist/html5shiv.js"></script>
	<script src="//css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
	<![endif]-->
	<!--[if IE 8]>
	<link rel="stylesheet" type="text/css" href="../../../../wp/wp-content/themes/rise/css/ie8.css"/>
	<![endif]-->
	<!--[if IE 7]>
	<link rel="stylesheet" type="text/css" href="../../../../wp/wp-content/themes/rise/css/ie7.css"/>
	<![endif]-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta charset="UTF-8">
	
			<meta name="google-site-verification" content="ovwnX0ej2kps4UuJ9NOzNjJcLOQD8JPDLNhe-hMYTMk">	
		<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

	<!-- This site is optimized with the Yoast SEO plugin v16.4 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>Stackstorm: from Nagios integration to Openstack automation - StackStorm</title>
	<link rel="canonical" href="./index.html">
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Stackstorm: from Nagios integration to Openstack automation - StackStorm">
	<meta property="og:description" content="January 07, 2016 by Igor Cherkaev aka eMptywee Recently I&#8217;ve been playing around Stackstorm &#8211; a platform for integration and automation of day-to-day tasks, monitoring events, existing scripts and deployment tools. I am going to explain how easy it is to wrap your daily tasks into Stackstorm actions and workflows and how to provide a&hellip;">
	<meta property="og:url" content="/2016/01/06/stackstorm-nagios-integration-openstack-automation/">
	<meta property="og:site_name" content="StackStorm">
	<meta property="article:published_time" content="2016-01-07T01:17:26+00:00">
	<meta property="article:modified_time" content="2017-09-07T21:53:11+00:00">
	<meta property="og:image" content="http://1.bp.blogspot.com/-HvUZN4pt-YY/Vo2pWgw5-aI/AAAAAAAAfPU/cBLKCh8IbbM/s1600/image001.png">
	<meta name="twitter:label1" content="Written by">
	<meta name="twitter:data1" content="Dmitri Zimine">
	<meta name="twitter:label2" content="Est. reading time">
	<meta name="twitter:data2" content="16 minutes">
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"/#organization","name":"StackStorm","url":"/","sameAs":[],"logo":{"@type":"ImageObject","@id":"/#logo","inLanguage":"en-US","url":"../../../../wp/wp-content/uploads/2014/10/stackstorm-logo-header.png","contentUrl":"../../../../wp/wp-content/uploads/2014/10/stackstorm-logo-header.png","width":228,"height":59,"caption":"StackStorm"},"image":{"@id":"/#logo"}},{"@type":"WebSite","@id":"/#website","url":"/","name":"StackStorm","description":"Event-driven automation","publisher":{"@id":"/#organization"},"potentialAction":[{"@type":"SearchAction","target":"/?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"en-US"},{"@type":"ImageObject","@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#primaryimage","inLanguage":"en-US","url":"http://1.bp.blogspot.com/-HvUZN4pt-YY/Vo2pWgw5-aI/AAAAAAAAfPU/cBLKCh8IbbM/s1600/image001.png","contentUrl":"http://1.bp.blogspot.com/-HvUZN4pt-YY/Vo2pWgw5-aI/AAAAAAAAfPU/cBLKCh8IbbM/s1600/image001.png"},{"@type":"WebPage","@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#webpage","url":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/","name":"Stackstorm: from Nagios integration to Openstack automation - StackStorm","isPartOf":{"@id":"/#website"},"primaryImageOfPage":{"@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#primaryimage"},"datePublished":"2016-01-07T01:17:26+00:00","dateModified":"2017-09-07T21:53:11+00:00","breadcrumb":{"@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#breadcrumb"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["/2016/01/06/stackstorm-nagios-integration-openstack-automation/"]}]},{"@type":"BreadcrumbList","@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"/","url":"/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"/blog/","url":"/blog/","name":"Blog"}},{"@type":"ListItem","position":3,"item":{"@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#webpage"}}]},{"@type":"Article","@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#article","isPartOf":{"@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#webpage"},"author":{"@id":"/#/schema/person/567d7d8eda65818b7b47ef6f9f362051"},"headline":"Stackstorm: from Nagios integration to Openstack automation","datePublished":"2016-01-07T01:17:26+00:00","dateModified":"2017-09-07T21:53:11+00:00","mainEntityOfPage":{"@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#webpage"},"wordCount":2271,"commentCount":0,"publisher":{"@id":"/#organization"},"image":{"@id":"/2016/01/06/stackstorm-nagios-integration-openstack-automation/#primaryimage"},"thumbnailUrl":"http://1.bp.blogspot.com/-HvUZN4pt-YY/Vo2pWgw5-aI/AAAAAAAAfPU/cBLKCh8IbbM/s1600/image001.png","keywords":["chatops","nagios"],"articleSection":["Blog","Community"],"inLanguage":"en-US","potentialAction":[{"@type":"CommentAction","name":"Comment","target":["/2016/01/06/stackstorm-nagios-integration-openstack-automation/#respond"]}]},{"@type":"Person","@id":"/#/schema/person/567d7d8eda65818b7b47ef6f9f362051","name":"Dmitri Zimine","image":{"@type":"ImageObject","@id":"/#personlogo","inLanguage":"en-US","url":"https://secure.gravatar.com/avatar/956412cafe5d4b1d26ad33df724c5288?s=96&d=mm&r=g","contentUrl":"https://secure.gravatar.com/avatar/956412cafe5d4b1d26ad33df724c5288?s=96&d=mm&r=g","caption":"Dmitri Zimine"},"url":"/author/dzimine/"}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel="dns-prefetch" href="//s.w.org">
<link rel="alternate" type="application/rss+xml" title="StackStorm &raquo; Stackstorm: from Nagios integration to Openstack automation Comments Feed" href="/2016/01/06/stackstorm-nagios-integration-openstack-automation/feed/">
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/13.0.1\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp\/wp-includes\/js\/wp-emoji-release.min.js?ver=09e48cfb58fec140b4ee0c6d1d4da1b2"}};
			!function(e,a,t){var n,r,o,i=a.createElement("canvas"),p=i.getContext&&i.getContext("2d");function s(e,t){var a=String.fromCharCode;p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,e),0,0);e=i.toDataURL();return p.clearRect(0,0,i.width,i.height),p.fillText(a.apply(this,t),0,0),e===i.toDataURL()}function c(e){var t=a.createElement("script");t.src=e,t.defer=t.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(t)}for(o=Array("flag","emoji"),t.supports={everything:!0,everythingExceptFlag:!0},r=0;r<o.length;r++)t.supports[o[r]]=function(e){if(!p||!p.fillText)return!1;switch(p.textBaseline="top",p.font="600 32px Arial",e){case"flag":return s([127987,65039,8205,9895,65039],[127987,65039,8203,9895,65039])?!1:!s([55356,56826,55356,56819],[55356,56826,8203,55356,56819])&&!s([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]);case"emoji":return!s([55357,56424,8205,55356,57212],[55357,56424,8203,55356,57212])}return!1}(o[r]),t.supports.everything=t.supports.everything&&t.supports[o[r]],"flag"!==o[r]&&(t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&t.supports[o[r]]);t.supports.everythingExceptFlag=t.supports.everythingExceptFlag&&!t.supports.flag,t.DOMReady=!1,t.readyCallback=function(){t.DOMReady=!0},t.supports.everything||(n=function(){t.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",n,!1),e.addEventListener("load",n,!1)):(e.attachEvent("onload",n),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&t.readyCallback()})),(n=t.source||{}).concatemoji?c(n.concatemoji):n.wpemoji&&n.twemoji&&(c(n.twemoji),c(n.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}</style>
	<link rel="stylesheet" id="dashicons-css" href="../../../../wp/wp-includes/css/dashicons.min.css?ver=09e48cfb58fec140b4ee0c6d1d4da1b2" type="text/css" media="all">
<link rel="stylesheet" id="menu-icons-extra-css" href="../../../../wp/wp-content/plugins/menu-icons/css/extra.min.css?ver=0.12.8" type="text/css" media="all">
<link rel="stylesheet" id="wp-block-library-css" href="../../../../wp/wp-includes/css/dist/block-library/style.min.css?ver=09e48cfb58fec140b4ee0c6d1d4da1b2" type="text/css" media="all">
<link rel="stylesheet" id="cookie-law-info-css" href="../../../../wp/wp-content/plugins/cookie-law-info/public/css/cookie-law-info-public.css?ver=2.0.3" type="text/css" media="all">
<link rel="stylesheet" id="cookie-law-info-gdpr-css" href="../../../../wp/wp-content/plugins/cookie-law-info/public/css/cookie-law-info-gdpr.css?ver=2.0.3" type="text/css" media="all">
<link rel="stylesheet" id="testimonial-rotator-style-css" href="../../../../wp/wp-content/plugins/testimonial-rotator/testimonial-rotator-style.css?ver=09e48cfb58fec140b4ee0c6d1d4da1b2" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-css" href="../../../../wp/wp-content/plugins/menu-icons/vendor/codeinwp/icon-picker/css/types/font-awesome.min.css?ver=4.7.0" type="text/css" media="all">
<link rel="stylesheet" id="rise-style-css" href="../../../../wp/wp-content/themes/stackstorm/style.css?ver=09e48cfb58fec140b4ee0c6d1d4da1b2" type="text/css" media="all">
<link rel="stylesheet" id="thrive-reset-css" href="../../../../wp/wp-content/themes/rise/css/reset.css?v=1.101.1" type="text/css" media="all">
<link rel="stylesheet" id="thrive-main-style-css" href="../../../../wp/wp-content/themes/rise/css/main_blue.css?v=1.101.1" type="text/css" media="all">
<link rel="stylesheet" id="enlighterjs-css" href="../../../../wp/wp-content/plugins/enlighter/cache/enlighterjs.min.css?ver=c8vUwCl5jS8Iu00" type="text/css" media="all">
<script type="text/javascript" src="../../../../wp/wp-includes/js/jquery/jquery.min.js?v=1.101.1" id="jquery-core-js"></script>
<script type="text/javascript" src="../../../../wp/wp-includes/js/jquery/jquery-migrate.min.js?v=1.101.1" id="jquery-migrate-js"></script>
<script type="text/javascript" id="cookie-law-info-js-extra">
/* <![CDATA[ */
var Cli_Data = {"nn_cookie_ids":[],"cookielist":[],"non_necessary_cookies":[],"ccpaEnabled":"","ccpaRegionBased":"","ccpaBarEnabled":"","strictlyEnabled":["necessary","obligatoire"],"ccpaType":"gdpr","js_blocking":"","custom_integration":"","triggerDomRefresh":"","secure_cookies":""};
var cli_cookiebar_settings = {"animate_speed_hide":"500","animate_speed_show":"500","background":"#384353","border":"#b1a6a6c2","border_on":"","button_1_button_colour":"#384353","button_1_button_hover":"#2d3642","button_1_link_colour":"#fff","button_1_as_button":"","button_1_new_win":"","button_2_button_colour":"#333","button_2_button_hover":"#292929","button_2_link_colour":"#00a5bf","button_2_as_button":"","button_2_hidebar":"1","button_3_button_colour":"#000","button_3_button_hover":"#000000","button_3_link_colour":"#fff","button_3_as_button":"1","button_3_new_win":"","button_4_button_colour":"#000","button_4_button_hover":"#000000","button_4_link_colour":"#fff","button_4_as_button":"1","button_7_button_colour":"#61a229","button_7_button_hover":"#4e8221","button_7_link_colour":"#fff","button_7_as_button":"1","button_7_new_win":"","font_family":"inherit","header_fix":"","notify_animate_hide":"1","notify_animate_show":"","notify_div_id":"#cookie-law-info-bar","notify_position_horizontal":"right","notify_position_vertical":"bottom","scroll_close":"","scroll_close_reload":"","accept_close_reload":"","reject_close_reload":"","showagain_tab":"1","showagain_background":"#fff","showagain_border":"#000","showagain_div_id":"#cookie-law-info-again","showagain_x_position":"100px","text":"#b7b7b7","show_once_yn":"","show_once":"10000","logging_on":"","as_popup":"","popup_overlay":"1","bar_heading_text":"","cookie_bar_as":"banner","popup_showagain_position":"bottom-right","widget_position":"left"};
var log_object = {"ajax_url":"\/wp\/wp-admin\/admin-ajax.php"};
/* ]]> */
</script>
<script type="text/javascript" src="../../../../wp/wp-content/plugins/cookie-law-info/public/js/cookie-law-info-public.js?ver=2.0.3" id="cookie-law-info-js"></script>
<script type="text/javascript" src="../../../../wp/wp-content/plugins/testimonial-rotator/js/jquery.cycletwo.js?v=1.101.1" id="cycletwo-js"></script>
<script type="text/javascript" src="../../../../wp/wp-content/plugins/testimonial-rotator/js/jquery.cycletwo.addons.js?v=1.101.1" id="cycletwo-addons-js"></script>
<script type="text/javascript" src="../../../../wp/wp-content/plugins/easy-logo-slider/js/jquery.jcarousel.min.js?v=1.101.1" id="jquery_jcarousel_min-js"></script>
<script type="text/javascript" src="../../../../wp/wp-content/plugins/easy-logo-slider/js/jcarousel.responsive.js?ver=09e48cfb58fec140b4ee0c6d1d4da1b2" id="jcarousel_responsive-js"></script>
<link rel="https://api.w.org/" href="/wp-json/">
<link rel="alternate" type="application/json" href="/wp-json../../../../wp/v2/posts/5203">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../../../wp/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../../../wp/wp-includes/wlwmanifest.xml"> 

<link rel="shortlink" href="/?p=5203">
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2016%2F01%2F06%2Fstackstorm-nagios-integration-openstack-automation%2F">
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=https%3A%2F%2F%2F2016%2F01%2F06%2Fstackstorm-nagios-integration-openstack-automation%2F&#038;format=xml">
<style type="text/css">:not(#tve) .ttfm1{font-family: 'dual300' !important;font-weight: 400 !important;}.ttfm1 input, .ttfm1 select, .ttfm1 textarea, .ttfm1 button {font-family: 'dual300' !important;font-weight: 400 !important;}:not(#tve) .ttfm2{font-family: 'Roboto' !important;font-weight: 400 !important;}.ttfm2 input, .ttfm2 select, .ttfm2 textarea, .ttfm2 button {font-family: 'Roboto' !important;font-weight: 400 !important;}:not(#tve) .ttfm2.bold_text,.ttfm2 .bold_text,.ttfm2 b,.ttfm2 strong{font-weight: 500 !important;}.ttfm2.bold_text,.ttfm2 .bold_text,.ttfm2 b,.ttfm2 strong input, .ttfm2.bold_text,.ttfm2 .bold_text,.ttfm2 b,.ttfm2 strong select, .ttfm2.bold_text,.ttfm2 .bold_text,.ttfm2 b,.ttfm2 strong textarea, .ttfm2.bold_text,.ttfm2 .bold_text,.ttfm2 b,.ttfm2 strong button {font-weight: 500 !important;}</style>
<style type="text/css" id="tve_global_variables">:root{--tcb-gradient-0:linear-gradient(180deg, #ff712c 0%, #000000 100%);}</style>		<style type="text/css">.wp-video-shortcode {
				max-width: 100% !important;
			}

			.bSe a {
				clear: right;
			}

			.bSe blockquote {
				clear: both;
			}
			body { background:#FFF; }.cnt article h1.entry-title a { color:#333; }.cnt article h2.entry-title a { color:#333; }.bSe h1, h1.entry-title, h1.entry-title a { color:#333; }.bSe h2 { color:#464545; }.bSe h3 { color:#333; }.bSe h4 { color:#333; }.bSe h5 { color:#333; }.bSe h6 { color:#333; }.bSe p, .mry .awr-e p { color:#666; }.cnt .bSe { color:#666; }.cnt h1 a, .tve-woocommerce .bSe .awr .entry-title, .tve-woocommerce .bSe .awr .page-title{font-family:Roboto,sans-serif;}.bSe h1{font-family:Roboto,sans-serif;}.bSe h2,.tve-woocommerce .bSe h2{font-family:Roboto,sans-serif;}.bSe h3,.tve-woocommerce .bSe h3{font-family:Roboto,sans-serif;}.bSe h4{font-family:Roboto,sans-serif;}.bSe h5{font-family:Roboto,sans-serif;}.bSe h6{font-family:Roboto,sans-serif;}#text_logo{font-family:Roboto,sans-serif;}.cnt h1 a { font-weight:500; }.bSe h1 { font-weight:500; }.bSe h2 { font-weight:500; }.bSe h3 { font-weight:500; }.bSe h4 { font-weight:500; }.bSe h5 { font-weight:500; }.bSe h6 { font-weight:500; }.cnt{font-family:Roboto,sans-serif;font-weight:300;}article strong {font-weight: bold;}.cnt p, .tve-woocommerce .product p, .tve-woocommerce .products p, .brd ul li, header nav ul li a, header nav ul li > ul li a, .has-extended.has-heading .colch, footer, footer .fmm p, .aut-f{font-family:Roboto,sans-serif;font-weight:300;}article strong {font-weight: bold;}.bSe h1, .bSe .entry-title { font-size:46px; }.cnt { font-size:18px; }.thrivecb { font-size:18px; }.out { font-size:18px; }.aut p { font-size:18px; }.cnt p { line-height:1.5em; }.thrivecb { line-height:1.5em; }.bSe a, .cnt a { color:#24447b; }.bSe .faq h4{font-family:Roboto,sans-serif;font-weight:300;}article strong {font-weight: bold;}header nav > ul.menu > li > a { color:#fff; }header nav > ul.menu > li >  a:hover { color:#fff; }header nav > ul > li.current_page_item > a:hover { color:#fff; }header nav > ul > li.current_menu_item > a:hover { color:#fff; }header nav > ul > li.current_menu_item > a:hover { color:#fff; }header nav > ul > li > a:active { color:#fff; }header #logo > a > img { max-width:200px; }header ul.menu > li.h-cta > a { color:#FFFFFF!important; }header ul.menu > li.h-cta > a { background:#4b7cc7; }header ul.menu > li.h-cta > a { border-color:#4b7cc7; }header ul.menu > li.h-cta > a:hover { color:#4b7cc7!important; }header ul.menu > li.h-cta > a:hover { background:#transparent; }</style>
		<style type="text/css">span.oe_textdirection { unicode-bidi: bidi-override; direction: rtl; }
	span.oe_displaynone { display: none; }</style>
<style type="text/css" id="thrive-default-styles">@media (min-width: 300px) { .tcb-style-wrap blockquote {color:rgb(102, 102, 102);background-color:rgba(0, 0, 0, 0);font-family:Roboto, sans-serif;font-size:18px;font-weight:300;font-style:normal;margin:;padding-top:0px;padding-bottom:0px;text-decoration:rgb(102, 102, 102);text-transform:none;border-left:;--tcb-applied-color:;} }</style>
<link rel="icon" href="../../../../wp/wp-content/uploads/2015/09/st2.png" sizes="32x32">
<link rel="icon" href="../../../../wp/wp-content/uploads/2015/09/st2.png" sizes="192x192">
<link rel="apple-touch-icon" href="../../../../wp/wp-content/uploads/2015/09/st2.png">
<meta name="msapplication-TileImage" content="../../../../wp/wp-content/uploads/2015/09/st2.png">
		<style type="text/css" id="wp-custom-css">/*
You can add your own CSS here.

Click the help icon above to learn more.
*/

.bSe ul:not([class]) {
margin-left: 20px;
margin-bottom: 15px;
}

.bSe ul:not([class]) li {
    padding-left: 0;
    margin-bottom: 5px;
    position: relative;
}

/* StackStorm "Donate" button */
li#menu-item-9062 a {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    background-color: #418cc5;
    border: 3px solid #418cc5;
    color: #fff !important;
    text-decoration: none;
    height: 30px;
    border-radius: 20px;
    padding: 0 12px;
    font-weight: 400;
    transition: all .25s ease-in-out;
}
li#menu-item-9062 a:hover {
    color: #333 !important;
}
li#menu-item-9062 a:before {
    top: 0;
}</style>
					<style type="text/css">/* ***blog*** */

pre code {
        overflow: scroll !important;
	white-space: pre !important;
	font-size: 11px
}

header.side nav>ul>li {
    padding: 15px !important;
}

.cnt {
    margin-top: 50px !important;
}

.cnt a.customHref{
    color: #f82 !important;
}

.bSe ul li:before {
    content: '' !important;
    position: absolute;
    left: 0;
    top: -2px;
}

.bSe ul {
    list-style-type: disc !important;
}

.bSe table tbody tr{
    border-top-width:0px !important;
}

code {
    font-size: 0.9em !important;
}

pre{
    font-family: Monaco, MonacoRegular, monospace !important;
    font-size: 14px !important;
    background-color: rgb(250,253,255) !important;
    padding: 0px 3px 0px 3px !important;
    white-space: pre !important;
}

.bSe h1, .bSe .entry-title {
    line-height: 1.2;
    font-size: 40px;
}

.bSe h2 {
    font-weight: 300;
}

.bSe h2, .tve-woocommerce .bSe h2 {
    font-family: "Roboto",sans-serif;
}

.cnt p, .tve-woocommerce .product p, .tve-woocommerce .products p {
    font-family: Roboto,sans-serif;
    font-weight: 300;
}

p {
    margin-bottom: 15px;
}


header.fbh {
    height: 49px;
}
header #logo>a>img {
    max-width: 150px;
}

.gist .blob-code .blob-code-inner .js-file-line  {
    white-space: pre !important;
}</style>
		
</head>
<body class="post-template-default single single-post postid-5203 single-format-standard">


<!-- BEGIN LF Header --> 	<div id="lf-header" style="padding-bottom: 3px; padding-top: 3px;background: #252525;"> 		<div class="container wrp"> 			<a href="https://linuxfoundation.org/projects" target="_blank" rel="noopener noreferrer"> 				<img src="../../../../wp/wp-content/themes/stackstorm/images/logo_lf_projects_horizontal.png" style="max-width: 270px;"> 			</a> 		</div> 	</div> 	<!-- END LF Header -->

<div class="theme-wrapper">
	
	
	
	
	<div class="fln">
		<div class="wrp clearfix">
												<a class="fl-l" href="../../../../index.html">
						<img src="../../../../wp/wp-content/uploads/2016/10/StackStorm-logo228.png" alt="StackStorm">
					</a>
										<div class="fl-s clearfix">
																<ul>
																													</ul>
			</div>
		</div>
	</div>


	<div class="header-wrapper h-bi">
		<div id="floating_menu" data-float="float" data-social="0">
			<header class="side" style="">
								<div class="h-i">
					<div class="wrp">
														<div id="logo">
									<a href="../../../../index.html">
										<img src="../../../../wp/wp-content/uploads/2016/10/StackStorm-logo228.png" alt="StackStorm"></a>
								</div>
																					<div class="m-s">
								<div class="hsm"></div>
								<div class="m-si">
																												<nav class="menu-stackstorm-refresh-container"><ul id="menu-stackstorm-refresh" class="menu">
<li id="menu-item-5952" class="menu-item menu-item-type-custom menu-item-object-custom toplvl"><a href="../../../../features/index.html">Features</a></li>
<li id="menu-item-6100" class="menu-item menu-item-type-custom menu-item-object-custom toplvl"><a href="../../../../index.html#community">Community</a></li>
<li id="menu-item-4207" class="menu-item menu-item-type-custom menu-item-object-custom toplvl"><a target="_blank" href="http://docs.stackstorm.com/">Docs</a></li>
<li id="menu-item-8701" class="menu-item menu-item-type-custom menu-item-object-custom toplvl"><a href="https://exchange.stackstorm.org/">Exchange</a></li>
<li id="menu-item-2277" class="menu-item menu-item-type-custom menu-item-object-custom toplvl"><a href="../../../../blog/index.html">Blog</a></li>
<li id="menu-item-9062" class="menu-item menu-item-type-post_type menu-item-object-page toplvl"><a href="../../../../donate/index.html">Donate</a></li>
</ul></nav>										<!-- Cart Dropdown -->
									
																	</div>
							</div>
						
					</div>
				</div>

			</header>
		</div>
	</div>

	
	
	
	
			
		
		<div class="wrp cnt">


			<section class="bSe bpd">
				
<div class="awr">

	
	
	
				<h1 class="entry-title">Stackstorm: from Nagios integration to Openstack automation</h1>
		
	
	
		<div class="awr-i">
		<p><strong>January 07, 2016</strong><br>
<em>by Igor Cherkaev aka eMptywee</em></p>
<p>Recently I&#8217;ve been playing around Stackstorm &#8211; a platform for integration and automation of day-to-day tasks, monitoring events, existing scripts and deployment tools.</p>
<p>I am going to explain how easy it is to wrap your daily tasks into Stackstorm actions and workflows and how to provide a simple way of execution for complex tasks.</p>
<p>I&#8217;ve been thinking for a while and initially I was going to bring everything up in one blog post. But later, it didn&#8217;t seem like a good idea. That being said, I&#8217;d rather break it into multiple posts, no matter how many there would be. Anyway, it seems to me that it&#8217;d be more practical and easier to read and understand.</p>
<h2>Nagios</h2>
<p>Let&#8217;s start with integrating Nagios alerts into Stackstorm. Assuming that you already have Stackstorm version 1.2.0+ installed, configured and running, as well as there&#8217;s Nagios running somewhere else that is capable of processing alerts and handling events. If not, please, proceed to <a href="/2016/01/06/stackstorm-nagios-integration-openstack-automation/www.">www.stackstorm.com</a> and <a href="/2016/01/06/stackstorm-nagios-integration-openstack-automation/www.nagios.org">www.nagios.org</a> (installation and initial configuration of these two tools is beyond the scope of this post). Both tools are open source and free to use and have extensive documentation on installation and basic configuration.</p>
<p>First of all, I was happy to find an existing Nagios integration pack <a href="https://github.com/StackStorm-Exchange/stackstorm-nagios">on StackStorm community repo</a>, but my joy ended really quickly as I found it not working. Secondly, <a href="../../../../2015/10/05/auto-remediation-out-of-disk-space/index.html">this StackStorm tutorial</a> helped me to get started.</p>
<p><span id="more-5203"></span></p>
<p>Although it talks about sensu and victorops (monitoring and paging tools), you can easily apply the logic to Nagios. With the help from Stackstorm support team (they are really cool guys and they reside on Slack, see <a href="../../../../community/index.html">/community</a> for details) I was able to patch the st2 service handler python script to make it work (see diff here <a href="https://www.diffchecker.com/vzsiskbg">https://www.diffchecker.com/vzsiskbg</a>). Don&#8217;t worry, later I&#8217;ll post a link to the github repository with all the files you need.</p>
<p>Also, don&#8217;t forget to apply for a trial <a href="/product/#enterprise">Enterprise Stackstorm edition</a>! You will get a very cool Flow Visual Editor that will let you create really nice workflows with a drag of your mouse! I highly recommend to at least try it. It won&#8217;t hurt, I promise.</p>
<h2>Deploying the pack</h2>
<p>Let&#8217;s go ahead and deploy our example nagios pack (the repository itself is located at https://github.com/emptywee/e_nagios):</p>
<pre><code class="sh">st2 run packs.install packs=e_nagios register=all repo_url=https://github.com/emptywee/e_nagios.git
</code></pre>
<p>Don&#8217;t worry if you see that re-loading rules throw some exceptions due to non-existing triggers. It&#8217;s all right at this point of time. The trigger will be created once you run the st2 service handler script from the nagios server (assuming that it can easily connect to your stackstorm server over ports 9100 and 9101 and the username-password pair is correct, and the latest stackstorm version supports accessing auth and API endpoints on 443 port as well, but I haven&#8217;t tried this approach yet). But this shouldn&#8217;t happen since we have all rules disabled by default in the pack. Let&#8217;s go ahead and enable <code>nagios_service_chat.yaml</code> rule. Simply edit it with your favorite editor in /opt/stackstorm/packs/e_nagios/rules/ and switch <code>enabled</code> to <code>true</code>.</p>
<h2>Adjusting rules</h2>
<p>Let&#8217;s take a brief look at the rule itself (<code>nagios_service_chat.yaml</code>):</p>
<pre><code class="yaml">---
name: notify_chat
pack: e_nagios
description: Post to chat when nagios service state changes
enabled: true
trigger:
 type: e_nagios.service_state_change
criteria:
 trigger.attempt:
   pattern: 2
   type: gt
action:
 ref: chatops.post_message
 parameters:
   message: NAGIOS {{trigger.service}} ID:{{trigger.event_id}} STATE:{{trigger.state}}[{{ trigger.state_id }}]/{{trigger.state_type}}
     {{trigger.msg}}
   channel: '563b5f7f21f7a36d7bd5baaf'
</code></pre>
<p><code>trigger:</code> &#8211; is the trigger name that will make this rule fire up the action when certain criteria are met. In our case here we will post a message to our chatops (be it Slack, Lets-chat, HipChat or any other that is supported by Hubot). Plugging in chatops has become a simple task since v1.2.0 of Stackstorm has been released. So make sure you have chatops up and running to fully utilize all features, comfort, flexibility, and other bells and whistles of Stackstorm platform.</p>
<p><code>criteria:</code> &#8211; with only AND logic so far you can specify when exactly you&#8217;d like the action to be executed. In this example we want the bot to report to chatops whenever any service or host changes its state into HARD state (usually after 3 consecutive checks with the same result).</p>
<p><code>action:</code> &#8211; what should be executed when the criteria are met. In our case here we will just post a message to the specific channel. If you are using Slack, the channel should be more readable and meaningful name. Don&#8217;t hesitate to alter it to your needs.</p>
<p>Don&#8217;t forget to reload the rules:</p>
<pre><code class="sh">st2ctl reload --register-rules
</code></pre>
<p>There&#8217;s another way to temporary enable rules:</p>
<pre><code class="sh">st2 rule enable e_nagios.notify_chat
</code></pre>
<p>But it will get disabled back after the next reload of the rules unless you modify respective YAML file with the rule definition (so-called meta-data).</p>
<h2>Setting up Nagios</h2>
<p>If you take a look at the st2 service handler script, you may notice that it is you who decides what to pass from Nagios to Stackstorm rules. Because it&#8217;s up to you to put anything you want into the payload that the script will send to Stackstorm. All these <code>trigger.service</code>, <code>trigger.msg</code> and alike are just parts of a payload that is formed on the Nagios host. With tens and hundreds of macros available in Nagios you may choose those that fit your needs. Here&#8217;s a link to the standard Nagios macros:<br>
<a href="https://assets.nagios.com/downloads/nagioscore/docs/nagioscore/3/en/macrolist.html">https://assets.nagios.com/downloads/nagioscore/docs/nagioscore/3/en/macrolist.html</a></p>
<p>Here&#8217;s what you should do on the Nagios host. First of all, you need to upload <code>st2service_handler.py</code> script and <code>st2service_handler.conf</code> to the Nagios host and place them somewhere you like, make sure that Nagios can execute the script from that location. Make the script executable.  Secondly, you need to define a check command with macros you found in the link just above. In my case I uploaded the script into the <code>/opt/nagios/libexec/</code> directory and have Nagios with NRPE setup, so I define it in the master <code>nrpe.cfg</code> file:</p>
<pre><code class="sh">command[st2nagios]=/opt/nagios/libexec/st2service_handler.py /opt/nagios/libexec/st2service_handler.conf $SERVICEEVENTID$ "$SERVICEDESC$" $SERVICESTATE$ $SERVICESTATEID$ $SERVICESTATETYPE$ $SERVICEATTEMPT$ $HOSTNAME$
</code></pre>
<p>Then apply this command to <code>global_service_event_handler</code> in <code>nagios.cfg</code>:</p>
<pre><code class="sh">global_service_event_handler=st2nagios
</code></pre>
<p>That is it! We are almost done with the Nagios part. A good thing would be running the command manually as the nagios user:</p>
<pre><code class="sh">$ whoami
nagios
$ /opt/nagios/libexec/st2service_handler.py /opt/nagios/libexec/st2service_handler.conf 123456 "Disk /var/log" WARNING 1 HARD 3 remote_host_name
Registered trigger type with st2.
POST: url: https://st2.example.com:9101/webhooks/st2/, body: {'trigger': 'e_nagios.service_state_change', 'payload': {'attempt': '3', 'service': 'Disk /var/log', 'event_id': '123456', 'state': 'WARNING', 'state_type': 'HARD', 'host': 'remote_host_name', 'msg': '[WARNING] Service/Host warning alert!', 'state_id': '1'}}
Sent nagios event to st2. HTTP_CODE: 202
</code></pre>
<p>This will register a trigger. After that you can safely reload rules that rely on the  <code>e_nagios.service_state_change</code> trigger. Also, running it manually will let you test your rules and actions without actually forcing Nagios to generate real alerts. That is a good thing, isn&#8217;t it?</p>
<p>So, in short, we are basically filling in our own payload and passing it from Nagios to Stackstorm. Just make sure that <code>st2service_handler.py</code> script has all the fields defined and in the correct order if you are about to add or remove Nagios macros from the event command.</p>
<p>The relevant part about it in <code>st2service_handler.py</code> is:</p>
<pre><code class="python">def _get_payload(host, service, event_id, state, state_id, state_type, attempt):
   payload = {}
   payload['host'] = host
   payload['service'] = service
   payload['event_id'] = event_id
   payload['state'] = state
   payload['state_id'] = state_id
   payload['state_type'] = state_type
   payload['attempt'] = attempt
   payload['msg'] = STATE_MESSAGE.get(state, 'Undefined state.')
   return payload
def main(args):
   event_id = args[1]
   service = args[2]
   state = args[3]
   state_id = args[4]
   state_type = args[5]
   attempt = args[6]
   host = args[7]
   body = {}
   body['trigger'] = ST2_TRIGGERTYPE_REF
   body['payload'] = _get_payload(host, service, event_id, state, state_id, state_type, attempt)
   _post_event_to_st2(_get_st2_webhooks_url(), body)
</code></pre>
<p>The order is defined by the array index of <code>args</code> passed to the main function. This is very important.</p>
<h2>Verifying in chatops</h2>
<p>Best way to verify it&#8217;s working is run the command manually from the Nagios host. You should see your bot reporting to the channel as it&#8217;s set in the rule.</p>
<p><img src="https://1.bp.blogspot.com/-HvUZN4pt-YY/Vo2pWgw5-aI/AAAAAAAAfPU/cBLKCh8IbbM/s1600/image001.png" alt="bot reports Nagios alerts" title="Bot reports Nagios alerts in the chatops"></p>
<p>Simple, eh? Now with what we have achieved so far, we can move forward and enhance our alert handling service.</p>
<h2>Enhancing alert handling</h2>
<p>Although it&#8217;s very exciting to receive alerts in the chat room, it doesn&#8217;t make you much happier than you already are, and it certainly doesn&#8217;t relieve you from manually going and checking what exactly triggered the alert and take remedial actions.</p>
<p>Your use-case and real world scenarios might be slightly different, but a disk space auto-remediation is a common task that everyone runs into during their day-to-day operations. You don&#8217;t really want to be awaken by a call early in the morning just to log in remotely and clean up some log files that filled up the whole disk. So it makes a really good example to deal with.</p>
<p>That&#8217;s where the <code>nagios_service_disk.yaml</code> rule comes handy. Let&#8217;s take a look at it:</p>
<pre><code class="yaml">---
name: check_disk
pack: e_nagios
description: Check disk usage and trigger remediation
enabled: true
trigger:
 type: e_nagios.service_state_change
criteria:
 trigger.service:
   pattern: "^Disk"
   type: matchregex
 trigger.state_type:
   pattern: "HARD"
   type: matchregex
 trigger.state_id:
   pattern: "0"
   type: gt
action:
 ref: e_nagios.remediate_disk_workflow
 parameters:
   hostname: "{{ trigger.host }}"
   directory: "{{ trigger.service | regex_replace('^Disk\\s*', '') }}" 
</code></pre>
<p>Pretty similar to the one above that just posts messages to the chat room, right? Don&#8217;t forget to enable it, as it comes disabled by default. Although we utilize the same trigger, criteria here are slightly different. We are matching service description to a certain regex pattern, and we explicitly matching hard state of the alert, and catching state ID greater than zero (since in Nagios 0 means RECOVERY, 1 &#8211; WARNING, 2 &#8211; CRITICAL). We do not want to automatically fire an action on recovery alerts, right? At least in this case. One thing is also important here, and I once spent a lot of time figuring out why my rule didn&#8217;t work properly. The thing is that <strong>you really should wrap your patterns in double-quotes</strong> when you define your criteria. Even if it&#8217;s an integer (see <code>trigger.state_id</code> criterion as an example).</p>
<p>That being said, once we receive an alert with the matching criteria Stackstorm will execute the defined action and do some magic with the parameters we are passing to that action. Namely, the action is called <code>e_nagios.remediate_disk_workflow</code> and is defined under actions/ directory of the pack. We also pass hostname that triggered the alert and stripping <code>Disk</code> part out of the service description, leaving only the directory of the mounted partition itself (assuming that disk monitoring service has appropriate service description defined in the Nagios config, don&#8217;t hesitate to adjust to your own environment here). Yes, Stackstorm supports Jinja2 filters in the rules definition when you pass parameters to actions!</p>
<h2>Disk Space Remediation Action</h2>
<p>It&#8217;s time to design our auto-remediation action! Here&#8217;s how it looks (and it does really look nice) in the Visual Flow tool that comes in the Enterprise Stackstorm edition:</p>
<p><img src="https://4.bp.blogspot.com/-8_vreXYrnDo/Vo2pjte-vII/AAAAAAAAfPc/mp33ENEpUxY/s1600/image003.png" alt="Visual Flow workflow design" title="Visual Flow workflow design tool"></p>
<p>The workflow itself is pretty simple and consists of the following steps:</p>
<ol>
<li>Report in the chatops that we received the task to check the disk space;</li>
<li>Run the disk check action that confirms the alert from Nagios;</li>
<li>If the disk usage is above the defined threshold, run an auto-remediation action, else report in the chat room that it was a false positive alert from Nagios;</li>
<li>If the auto-remediation action completes with no errors try to check the disk space usage again, else report about the error in the chat room;</li>
<li>If the disk space usage comes below the defined threshold assume that auto-remediation succeeded and report about it in the chatops, else report in the chat room that the auto-remediation failed.</li>
</ol>
<p>Suffice to say that reporting to the channel can be substituted or extended to reporting via email or any other means to page you and ask for manual intervention. The good thing here is that the scripts that do all the job can be written in any language you like, just make sure they can be executed remotely on the host that is being checked.</p>
<p>Before we can design our workflows in the Visual Flow, we need to define two basic actions for our needs:</p>
<ol>
<li>check_dir_size</li>
<li>disk_remediate</li>
</ol>
<p>The meta-data for the <code>check_dir_size</code> action is defined in YAML and looks like this:</p>
<pre><code class="yaml">description: 'Check the total percentage of disk taken up by a specified directory'
enabled: true
entry_point: check_dir_size.py
name: check_dir_size
parameters:
 action:
   description: "Run as an action.  (Outputs structured data)"
   default: true
   immutable: true
   type: boolean
 directory:
   description: "The directory to check"
   required: true
   type: string
 threshold:
   description: "Maximum percentage of disk space that can be consumed by the directory."
   default: 80
   type: integer
 debug:
   description: "Turn on debug output"
   default: false
   type: boolean
 sudo:
   default: true
   immutable: true
runner_type: remote-shell-script
</code></pre>
<p>Three things to pay attention to: <code>entry_point</code>, <code>parameters</code> and <code>runner_type</code>. Since it&#8217;s a <code>remote-shell-script</code> runner, there&#8217;s an implied parameter <code>hosts</code> that this action will require (see <a href="https://docs.stackstorm.com/runners.html#remote-script-runner-remote-shell-script">https://docs.stackstorm.com/runners.html</a> for details, for instance in case you need to provide password authentication). <code>entry_point</code> points to the script name that should reside in the same directory. <code>parameters</code> declares all parameters that will be passed to the script, their types and other options. As a homework you may want to transform the alert level (Warning or Critical) coming from Nagios into threshold level for the script. But it should be done in the workflow that is depicted earlier when we talked about the Visual Flow instrument.<br>
And the most interesting action is the <code>disk_remediate</code> action. Let&#8217;s take a look at the meta-data of the action:</p>
<pre><code class="yaml">description: 'Try to remediate disk space issues'
enabled: true
entry_point: disk_remediate.pl
name: disk_remediate
parameters:
 action:
   description: "Run as an action.  (Outputs structured data)"
   default: true
   immutable: true
   type: boolean
 directory:
   description: "The directory to check"
   required: true
   type: string
 debug:
   description: "Turn on debug output"
   default: false
   type: boolean
 sudo:
   default: true
   immutable: true
runner_type: remote-shell-script
</code></pre>
<p>Basically it looks very similar to the first one. And here&#8217;s where your imagination comes forward. The dummy auto-remediation script may look something like this:</p>
<pre><code class="Perl">#!/usr/bin/perl
use strict;
use Getopt::Long;
#use JSON;

my $directory;
my $debug;
my %output;

GetOptions(
   "directory=s" =&gt; \$directory,
   "debug"      =&gt; \$debug
);

if ( !defined( $directory ) )
{
   $output{ 'result' } = 'fail';
   $output{ 'reason' } = "Directory is not provided!";
   finish( 1 );
}

if($directory eq '/var/log')
{
# do something with /var/log
}
elsif ($directory eq '/var')
{
# do something with /var
}
elsif ($directory eq '/home')
{
# do something with /home
}
elsif ($directory eq '/opt')
{
# do something with /opt
}

$output{'result'} = 'success';
finish(0);

sub finish
{
   my $exit_code = shift || 0;
   #my $json = encode_json \%output;
   #print "$json\n";
   exit( $exit_code );
}
</code></pre>
<p>Who writes in Perl nowadays you&#8217;d ask? I don&#8217;t know. Some old farts like me, probably. But you may go ahead and use your favorite Bash, Python or Ruby. All that matters is that it should be executable remotely on the host, where the disk issue is appeared and reported by Nagios. You may want to compress logs, upload them, move them, just delete them, enable compression in logrotate configuration or even try to extend logical volumes if you have some spare space left when such need arises. It&#8217;s completely up to you what to do. I have disabled JSON output in the dummy script since JSON module is not installed by default on the Linux distributions. In general it&#8217;s a good idea to produce outcome in JSON format, since it then can be easily adopted and published by actions in a workflow.</p>
<p>And in the end the whole workflow after you put everything together will look like (which is also shown on the picture in the beginning of the chapter, but in Visual Flow representation):</p>
<pre><code class="yaml">---
version: '2.0'

e_nagios.remediate_disk_workflow:
 type: direct
 input:
   - hostname
   - directory
   - threshold
   - channel
 tasks:
   lets_work:
     # [466, 27]
     action: chatops.post_message
     input:
       channel: &lt;% $.channel %&gt;
       message: "epsibot is trying to take care of the disk space issue on &lt;% $.hostname %&gt; in &lt;% $.directory %&gt;"
     on-success:
       - check_dir_size
   check_dir_size:
     # [289, 149]
     action: e_nagios.check_dir_size
     input:
       hosts: &lt;% $.hostname %&gt;
       directory: &lt;% $.directory %&gt;
       threshold: &lt;% $.threshold %&gt;
     on-success:
       - hubot_error
     on-error:
       - remediate
   hubot_report:
     # [485, 568]
     action: chatops.post_message
     input:
       channel: &lt;% $.channel %&gt;
       message: "epsibot has cleared &lt;% $.directory %&gt; on &lt;% $.hostname %&gt; and it is now less than &lt;% $.threshold %&gt; percent!"
   hubot_error:
     # [114, 274]
     action: chatops.post_message
     input:
       channel: &lt;% $.channel %&gt;
       message: "Alert from Nagios was false positive for &lt;% $.directory %&gt; on &lt;% $.hostname %&gt;!"
   remediate:
     # [489, 233]
     action: e_nagios.disk_remediate
     input:
       hosts: &lt;% $.hostname %&gt;
       directory: &lt;% $.directory %&gt;
     on-success:
       - check_dir_size2
     on-error:
       - hubot_rem_fail
   check_dir_size2:
     # [485, 410]
     action: e_nagios.check_dir_size
     input:
       hosts: &lt;% $.hostname %&gt;
       directory: &lt;% $.directory %&gt;
       threshold: &lt;% $.threshold %&gt;
     on-success:
       - hubot_report
     on-error:
       - hubot_rem_fail
   hubot_rem_fail:
     # [82, 464]
     action: chatops.post_message
     input:
       channel: &lt;% $.channel %&gt;
       message: "Auto-remediation failed for &lt;% $.directory %&gt; on &lt;% $.hostname %&gt;. Please check manually."
</code></pre>
<p>As I mentioned earlier we can actually pass how critical the alert was (was it just a warning or the situation is critical) and act accordingly by altering the threshold or telling our script to be more aggressive.</p>
<p>At last, let&#8217;s look at the workflow&#8217;s metadata, as it contains parameters that tie it to the rule we started from:</p>
<pre><code class="yaml">---
 name: "remediate_disk_workflow"
 runner_type: mistral-v2
 description: "Remediation workflow for diskspace alerts"
 enabled: true
 entry_point: "workflows/remediate_disk_workflow.yaml"
 parameters:
   hostname:
     type: "string"
     description: "Host to remediate disk space on"
   directory:
     type: "string"
     description: "Directory to prune if over the threshold"
   threshold:
     type: "integer"
     description: "threshold for check diskspace action. percentage"
     default: 75
   channel:
     type: "string"
     default: "563b5f7f21f7a36d7bd5baaf"
     description: "Channel to post messages to"
   context:
     default: {}
     immutable: true
     type: object
   task:
     default: null
     immutable: true
     type: string
</code></pre>
<p>For example, we can define an array in the metadata with threshold levels for critical and warning alerts and use it to pass different numbers to disk check scripts later in the workflow. Think about it on your own and try to implement.</p>
<p>Hope that helps to get your started with auto-remediation and guard your sleep at night. There are a few other rules in the pack worth looking at, e.g. triggering actions on &#8220;proc&#8221; and &#8220;load&#8221; Nagios service alerts. That being said, you may want to restart processes when Nagios reports them down.</p>
<p>We will talk about Stackstorm and Openstack integration in the next series of my posts.</p>
<hr>
<p><em>This guest post is originally posted at <a href="https://emptywee.blogspot.com/2016/01/part-i-stackstorm-from-nagios.html">https://emptywee.blogspot.com</a></em></p>	</div>
	<div class="clear"></div>
	
	
	
				<div class="pnav">
			<a class="pav left" href="../../../../2015/12/12/automation-happy-hour-9-multi-cloud-orchestration/index.html">
				<span>Previous Post</span>
				<span>Automation Happy Hour #09 &#8211; Multi-Cloud Orchestration</span>
			</a>
			<a class="pav right" href="../../../../2016/01/16/automation-happy-hour-10-designing-a-remediation-solution/index.html">
				<span>Next Post</span>
				<span>Automation Happy Hour #10 &#8211; ChatOps, Auto-Remediation, and More!</span>
			</a>
		</div>
	</div>

	
<div id="disqus_thread"></div>
			</section>


		</div>
		<div class="clear"></div>
	

<div class="footer-wrapper">
<footer>
				<div class="fmw">
			<div class="wrp">
									<div class="colm oth ">
						<section id="text-7" class="col"><div class="scn">			<div class="textwidget">
<p><a href="http://docs.stackstorm.com/" target="_blank" rel="noopener">Documentation</a><br>
<a href="https://github.com/StackStorm" target="_blank" rel="noopener">GitHub</a><br>
<a href="../../../../index.html#community" target="_blank" rel="noopener">Community</a><br>
<a href="../../../../security/index.html" target="_blank" rel="noopener">Security</a></p>
</div>
		</div></section>					</div>
									<div class="colm oth ">
						<section id="text-8" class="col"><div class="scn">			<div class="textwidget">
<p><a href="../../../../blog/index.html">Blog</a><br>
<a href="https://www.youtube.com/channel/UCColc5CuBJ8-1SnALnkDz8Q">Video Gallery</a><br>
<a href="../../../../privacy-policy/index.html">Privacy Policy</a></p>
</div>
		</div></section>					</div>
									<div class="colm oth lst">
						<section id="text-9" class="col"><div class="scn">			<div class="textwidget">
<div style="line-height:1.7em;">
<a href="../../../../contact/index.html">Contact</a><br>

<div class="ic-social">
<a href="https://www.facebook.com/stackstormdevops" target="_blank" rel="noopener"><i class="fa fa-facebook-square"></i></a>
<a href="https://twitter.com/StackStorm" target="_blank" rel="noopener"><i class="fa fa-twitter-square"></i></a>
<a href="https://www.linkedin.com/company/stackstorm" target="_blank" rel="noopener"><i class="fa fa-linkedin-square"></i></a>
<a href="https://github.com/StackStorm" target="_blank" rel="noopener"><i class="fa fa-github-square"></i></a>
<a href="https://www.youtube.com/channel/UCColc5CuBJ8-1SnALnkDz8Q" target="_blank" rel="noopener"><i class="fa fa-youtube-square"></i></a>
</div>
</div>
<style type="text/css">.tve-leads-track-ribbon-46 {
  top: 70px !important;
}
.tve-leads-track-ribbon-46 #tve_four_set {
  font-family: 'Open Sans', Helvetica, Arial, Lucida, sans-serif;
}
.tve-leads-track-ribbon-46 #tve_four_set .thrv-ribbon {
border-top: 1px solid #ddd;
    box-shadow: 0px 4px 3px -4px rgba(0,0,0,0.75);
    padding-bottom: 0px !important;
    padding-top: 0px !important;
    border-right: none;
    border-left: none;
}
.tve-leads-track-ribbon-46 .bold_text {
  font-weight: normal;
}
.tve-leads-track-ribbon-46 #tve_four_set .tve-ribbon-close {
height: 30px;
    border-color: white;
    color: white;
    font-family: sans-serif;
    border-width: 2px;
    top: 50%;
    margin-top: -15px;
    font-size: 18px;
    font-weight: 800;
}</style>
</div>
		</div></section>					</div>
								<div class="clear"></div>
			</div>
		</div>
		<div class="fmm">
		<div class="wrp">
			<div class="ft-m">
							</div>
		</div>
		<div class="wrp">
			<div class="ft-c">
				<p>
											© 2021 StackStorm a Series of LF Projects, LLC. All rights reserved. For web site terms of use, trademark policy and other project policies please see <a href="https://lfprojects.org/">https://lfprojects.org/</a>. 
<br>For a list of trademarks of The Linux Foundation, please see our <a href="https://www.linuxfoundation.org/trademark-usage">Trademark Usage</a> page. Linux is a registered trademark of Linus Torvalds.  <a href="https://www.linuxfoundation.org/privacy">Privacy Policy</a> and <a href="https://www.linuxfoundation.org/terms">Terms of Use</a>.														</p>
			</div>
			<div class="ft-s">
												<ul>
																																		</ul>
			</div>
		</div>
		<div class="clear"></div>
	</div>
	</footer>
</div>


<!--googleoff: all--><div id="cookie-law-info-bar" data-nosnippet="true"><span>We use cookies for traffic analytics and ad and content personalization. By clicking on any of the content or interacting with any section of this website,<br>you are agreeing to this use of cookies in the manner described in our <a href="../../../../privacy-policy/index.html" id="CONSTANT_OPEN_URL" target="_blank" class="cli-plugin-main-link" style="display:inline-block;">Privacy Policy</a> <a role="button" tabindex="0" data-cli_action="accept" id="cookie_action_close_header" class="cli-plugin-main-button cookie_action_close_header cli_action_button" style="display:inline-block; ">close [x]</a></span></div>
<div id="cookie-law-info-again" style="display:none;" data-nosnippet="true"><span id="cookie_hdr_showagain">Privacy & Cookies Policy</span></div>
<div class="cli-modal" data-nosnippet="true" id="cliSettingsPopup" tabindex="-1" role="dialog" aria-labelledby="cliSettingsPopup" aria-hidden="true">
  <div class="cli-modal-dialog" role="document">
	<div class="cli-modal-content cli-bar-popup">
	  	<button type="button" class="cli-modal-close" id="cliModalClose">
			<svg class="" viewbox="0 0 24 24"><path d="M19 6.41l-1.41-1.41-5.59 5.59-5.59-5.59-1.41 1.41 5.59 5.59-5.59 5.59 1.41 1.41 5.59-5.59 5.59 5.59 1.41-1.41-5.59-5.59z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg>
			<span class="wt-cli-sr-only">Close</span>
	  	</button>
	  	<div class="cli-modal-body">
			<div class="cli-container-fluid cli-tab-container">
	<div class="cli-row">
		<div class="cli-col-12 cli-align-items-stretch cli-px-0">
			<div class="cli-privacy-overview">
				<h4>Privacy Overview</h4>				<div class="cli-privacy-content">
					<div class="cli-privacy-content-text">This website uses cookies to improve your experience while you navigate through the website. Out of these, the cookies that are categorized as necessary are stored on your browser as they are essential for the working of basic functionalities of the website. We also use third-party cookies that help us analyze and understand how you use this website. These cookies will be stored in your browser only with your consent. You also have the option to opt-out of these cookies. But opting out of some of these cookies may affect your browsing experience.</div>
				</div>
				<a class="cli-privacy-readmore" aria-label="Show more" tabindex="0" role="button" data-readmore-text="Show more" data-readless-text="Show less"></a>			</div>
		</div>
		<div class="cli-col-12 cli-align-items-stretch cli-px-0 cli-tab-section-container">
												<div class="cli-tab-section">
						<div class="cli-tab-header">
							<a role="button" tabindex="0" class="cli-nav-link cli-settings-mobile" data-target="necessary" data-toggle="cli-toggle-tab">
								Necessary							</a>
							<div class="wt-cli-necessary-checkbox">
                        <input type="checkbox" class="cli-user-preference-checkbox" id="wt-cli-checkbox-necessary" data-id="checkbox-necessary" checked>
                        <label class="form-check-label" for="wt-cli-checkbox-necessary">Necessary</label>
                    </div>
                    <span class="cli-necessary-caption">Always Enabled</span> 						</div>
						<div class="cli-tab-content">
							<div class="cli-tab-pane cli-fade" data-id="necessary">
								<p>Necessary cookies are absolutely essential for the website to function properly. This category only includes cookies that ensures basic functionalities and security features of the website. These cookies do not store any personal information.</p>
							</div>
						</div>
					</div>
																	<div class="cli-tab-section">
						<div class="cli-tab-header">
							<a role="button" tabindex="0" class="cli-nav-link cli-settings-mobile" data-target="non-necessary" data-toggle="cli-toggle-tab">
								Non-necessary							</a>
							<div class="cli-switch">
                        <input type="checkbox" id="wt-cli-checkbox-non-necessary" class="cli-user-preference-checkbox" data-id="checkbox-non-necessary" checked>
                        <label for="wt-cli-checkbox-non-necessary" class="cli-slider" data-cli-enable="Enabled" data-cli-disable="Disabled"><span class="wt-cli-sr-only">Non-necessary</span></label>
                    </div>						</div>
						<div class="cli-tab-content">
							<div class="cli-tab-pane cli-fade" data-id="non-necessary">
								<p>Any cookies that may not be particularly necessary for the website to function and is used specifically to collect user personal data via analytics, ads, other embedded contents are termed as non-necessary cookies. It is mandatory to procure user consent prior to running these cookies on your website.</p>
							</div>
						</div>
					</div>
										</div>
	</div>
</div>
	  	</div>
	  	<div class="cli-modal-footer">
			<div class="wt-cli-element cli-container-fluid cli-tab-container">
				<div class="cli-row">
					<div class="cli-col-12 cli-align-items-stretch cli-px-0">
						<div class="cli-tab-footer wt-cli-privacy-overview-actions">
						
															<a id="wt-cli-privacy-save-btn" role="button" tabindex="0" data-cli-action="accept" class="wt-cli-privacy-btn cli_setting_save_button wt-cli-privacy-accept-btn cli-btn">SAVE & ACCEPT</a>
													</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>
  </div>
</div>
<div class="cli-modal-backdrop cli-fade cli-settings-overlay"></div>
<div class="cli-modal-backdrop cli-fade cli-popupbar-overlay"></div>
<!--googleon: all--><script type="text/javascript">/**
 * Displays toast message from storage, it is used when the user is redirected after login
 */
if ( window.sessionStorage ) {
	window.addEventListener( 'load', function () {
		var message = sessionStorage.getItem( 'tcb_toast_message' );

		if ( message ) {
			tcbToast( sessionStorage.getItem( 'tcb_toast_message' ), false );
			sessionStorage.removeItem( 'tcb_toast_message' );
		}
	} );
}

/**
 * Displays toast message
 */
function tcbToast( message, error, callback ) {
	/* Also allow "message" objects */
	if ( typeof message !== 'string' ) {
		message = message.message || message.error || message.success;
	}
	if ( ! error ) {
		error = false;
	}

	let _icon = 'checkmark',
		_extra_class = '';
	if ( error ) {
		_icon = 'cross';
		_extra_class = ' tve-toast-error';
	}

	jQuery( 'body' ).slideDown( 'fast', function () {
		jQuery( 'body' ).prepend( '<div class="tvd-toast tve-fe-message"><div class="tve-toast-message"><div class="tve-toast-icon-container' + _extra_class + '"><span class="tve_tick thrv-svg-icon"><svg xmlns="http://www.w3.org/2000/svg" class="tcb-checkmark" style="width: 100%; height: 1em; stroke-width: 0; fill: #ffffff; stroke: #ffffff;" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z"><\/path><\/svg><\/span><\/div><div class="tve-toast-message-container">' + message + '<\/div><\/div><\/div>' );
	} );

	setTimeout( function () {
		jQuery( '.tvd-toast' ).hide();

		if ( typeof callback === 'function' ) {
			callback();
		}

	}, 3000 );
}
</script><link rel="stylesheet" id="jcarouselresponsive-css" href="../../../../wp/wp-content/plugins/easy-logo-slider/css/jcarouselresponsive.css?ver=09e48cfb58fec140b4ee0c6d1d4da1b2" type="text/css" media="all">
<link rel="stylesheet" id="style-admin-css" href="../../../../wp/wp-content/plugins/easy-logo-slider/css/style-admin.css?ver=09e48cfb58fec140b4ee0c6d1d4da1b2" type="text/css" media="all">
<script type="text/javascript" id="disqus_count-js-extra">
/* <![CDATA[ */
var countVars = {"disqusShortname":"stackstorm"};
/* ]]> */
</script>
<script type="text/javascript" src="../../../../wp/wp-content/plugins/disqus-comment-system/public/js/comment_count.js?ver=3.0.22" id="disqus_count-js"></script>
<script type="text/javascript" id="disqus_embed-js-extra">
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"integration":"wordpress 3.0.22"},"disqusIdentifier":"5203 \/?p=5203","disqusShortname":"stackstorm","disqusTitle":"Stackstorm: from Nagios integration to Openstack automation","disqusUrl":"\/2016\/01\/06\/stackstorm-nagios-integration-openstack-automation\/","postId":"5203"};
/* ]]> */
</script>
<script type="text/javascript" src="../../../../wp/wp-content/plugins/disqus-comment-system/public/js/comment_embed.js?ver=3.0.22" id="disqus_embed-js"></script>
<script type="text/javascript" id="thrive-main-script-js-extra">
/* <![CDATA[ */
var ThriveApp = {"ajax_url":"\/wp\/wp-admin\/admin-ajax.php","is_singular":"1","post_type":"post","lazy_load_comments":"0","comments_loaded":"0","theme_uri":"\/wp\/wp-content\/themes\/rise","translations":{"ProductDetails":"Product Details"}};
/* ]]> */
</script>
<script type="text/javascript" src="../../../../wp/wp-content/themes/rise/js/script.js?v=1.101.1" id="thrive-main-script-js"></script>
<script type="text/javascript" id="tve-dash-frontend-js-extra">
/* <![CDATA[ */
var tve_dash_front = {"ajaxurl":"\/wp\/wp-admin\/admin-ajax.php","force_ajax_send":"","is_crawler":"1","recaptcha":[]};
/* ]]> */
</script>
<script type="text/javascript" src="../../../../wp/wp-content/themes/rise/thrive-dashboard/js/dist/frontend.min.js?ver=2.4.0.1" id="tve-dash-frontend-js"></script>
<script type="text/javascript" src="../../../../wp/wp-content/plugins/enlighter/cache/enlighterjs.min.js?ver=c8vUwCl5jS8Iu00" id="enlighterjs-js"></script>
<script type="text/javascript" id="enlighterjs-js-after">
!function(e,n){if("undefined"!=typeof EnlighterJS){var o={"selectors":{"block":"pre.EnlighterJSRAW","inline":"code.EnlighterJSRAW"},"options":{"indent":2,"ampersandCleanup":true,"linehover":true,"rawcodeDbclick":false,"textOverflow":"break","linenumbers":false,"theme":"beyond","language":"python","retainCssClasses":false,"collapse":false,"toolbarOuter":"","toolbarTop":"{BTN_RAW}{BTN_COPY}{BTN_WINDOW}{BTN_WEBSITE}","toolbarBottom":""}};(e.EnlighterJSINIT=function(){EnlighterJS.init(o.selectors.block,o.selectors.inline,o.options)})()}else{(n&&(n.error||n.log)||function(){})("Error: EnlighterJS resources not loaded yet!")}}(window,console);
</script>
<script type="text/javascript" src="../../../../wp/wp-includes/js/wp-embed.min.js?ver=09e48cfb58fec140b4ee0c6d1d4da1b2" id="wp-embed-js"></script>
<script type="text/javascript">var tcb_post_lists=JSON.parse('[]');</script>
</div>
</body>
</html>